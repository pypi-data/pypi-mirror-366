Metadata-Version: 2.4
Name: harmony-hpack
Version: 1.0.9
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Requires-Dist: json5
Requires-Dist: segno
Requires-Dist: prompt_toolkit
Dynamic: description
Dynamic: description-content-type
Dynamic: requires-dist
Dynamic: requires-python

# ğŸš€ hpack - é¸¿è’™ HarmonyOS å†…æµ‹ç­¾åæ‰“åŒ…åˆ†å‘å·¥å…·


<div align="center">  

![Version](https://img.shields.io/badge/version-1.0.9-blue)
![License](https://img.shields.io/badge/License-Apache%202.0-green.svg)    

[ğŸŒ **å®˜ç½‘**](https://ihongren.github.io/hpack.html)   â€¢   [ğŸ“‹ **æ›´æ–°æ—¥å¿—**](https://github.com/iHongRen/hpack/blob/main/CHANGELOG.md)   â€¢   [ğŸ“š **deepwiki**](https://deepwiki.com/iHongRen/hpack)  

</div>

## ç®€ä»‹

**[hpack](https://github.com/iHongRen/hpack)** `[h-pack]` æ˜¯ä¸€ä¸ªä¸“ä¸ºé¸¿è’™ HarmonyOS æ‰“é€ çš„å†…æµ‹åˆ†å‘å·¥å…·ï¼Œå®Œæˆé…ç½®åï¼Œä½ åªéœ€ä¸€è¡Œå‘½ä»¤ï¼Œå°±èƒ½è½»æ¾å®Œæˆé¸¿è’™åº”ç”¨çš„æ„å»ºã€ç­¾åï¼Œä¸Šä¼ ã€åˆ†å‘ã€å®‰è£…ã€‚



## åŠŸèƒ½ç‰¹æ€§

-  **æ‰“åŒ…ç­¾å**ï¼šè‡ªåŠ¨æ‰“å‡ºæ‰€æœ‰çš„ `hap` å’Œ `hsp` åŒ…ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œç­¾å
- **å¤š Product æ”¯æŒ**ï¼šå¦‚æœé…ç½®äº†å¤šç›®æ ‡äº§ç‰©ï¼Œæ”¯æŒé€‰æ‹©æŒ‡å®šçš„ `product` æ‰“åŒ…
-  **ç­¾å manifest.json5**ï¼šè¯»å–åº”ç”¨æ‰“åŒ…æ•°æ®ï¼Œè‡ªåŠ¨ç”Ÿæˆå·²ç­¾å `manifest.json5` æ–‡ä»¶
-  **åˆ†å‘ index é¡µ**ï¼šè‡ªåŠ¨ç”Ÿæˆåˆ†å‘é¡µï¼Œæä¾›å¤šç§ HTML æ¨¡æ¿ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿
-  **äºŒç»´ç ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆåº”ç”¨çš„äºŒç»´ç ï¼Œæ–¹ä¾¿å†…æµ‹äººå‘˜å¿«é€Ÿä¸‹è½½å’Œå®‰è£…
-  **è‡ªå®šä¹‰ä¸Šä¼ **ï¼šæ”¯æŒå°†æ‰“åŒ…æ–‡ä»¶ä¸Šä¼ åˆ°é˜¿é‡Œäº‘ OSSï¼Œä»¥åŠè‡ªå®šä¹‰ä¸Šä¼ 
-  **è‡ªå®šä¹‰å†å²æ‰“åŒ…é¡µé¢ï¼š**æä¾›äº† `history.html` æ¨¡æ¿
-  **webhookæ”¯æŒ**ï¼šæä¾›äº†é’‰é’‰ã€ä¼å¾®ã€é£ä¹¦ç­‰ä½¿ç”¨ç¤ºä¾‹
-  **æ˜¾ç¤ºè®¾å¤‡**ï¼šæ˜¾ç¤ºæ­£åœ¨è¿æ¥çš„è®¾å¤‡ `hpack targets`
-  **æŸ¥çœ‹UDID**ï¼šæ˜¾ç¤ºæ­£åœ¨è¿æ¥è®¾å¤‡çš„ UDID `hpack -u`
-  **ç­¾åå·¥å…·**ï¼šæ”¯æŒå¯¹æœªç­¾åçš„ `.app`ã€`.hap`ã€`.hsp` å’ŒåŒ…ç›®å½•ç­¾å
-  **å‘½ä»¤å®‰è£…**ï¼šæ”¯æŒé€šè¿‡å‘½ä»¤å®‰è£…å·²ç­¾åçš„ `.app`ã€`.hap` å’ŒåŒ…ç›®å½•



## å®‰è£…ä½¿ç”¨

#### å¿«é€Ÿå®‰è£…

```bash
pip install harmony-hpack
```
å›½å†…é•œåƒæºå®‰è£…ï¼ˆæ¨è)

```bash
# æ¸…åæº
pip install -i https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple harmony-hpack

# é˜¿é‡Œæº
pip install -i https://mirrors.aliyun.com/pypi/simple harmony-hpack

# è…¾è®¯æº
pip install -i https://mirrors.cloud.tencent.com/pypi/simple harmony-hpack

# å®˜æ–¹æº
pip install -i https://pypi.org/simple harmony-hpack
```

å…¶ä»–æ“ä½œ

```bash
# éªŒè¯å®‰è£…
hpack -h

# å‡çº§
pip install --upgrade harmony-hpack

# å¸è½½
pip uninstall harmony-hpack

# é…ç½®é•œåƒæº
pip config set global.index-url https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple
```



#### å‡†å¤‡å·¥ä½œ

> ğŸ’¡ **é‡è¦æç¤º**ï¼šåœ¨å¼€å§‹ä¹‹å‰ï¼Œå»ºè®®å…ˆé˜…è¯»é¸¿è’™å®˜æ–¹æ–‡æ¡£ [HarmonyOS åº”ç”¨å†…éƒ¨æµ‹è¯•](https://developer.huawei.com/consumer/cn/doc/app/agc-help-harmonyos-internaltest-0000001937800101#section042515172197)

ä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹ä¸‰ä¸ªè¯ä¹¦æ–‡ä»¶ï¼š

| æ–‡ä»¶ç±»å‹ | æ ¼å¼ | è¯´æ˜ |
|---------|------|------|
| å‘å¸ƒè¯ä¹¦ | `.cer` | ç”±AGCé¢å‘çš„æ•°å­—è¯ä¹¦ï¼Œç”¨äºéªŒè¯åº”ç”¨çš„èº«ä»½å’Œç­¾å            |
| å†…éƒ¨æµ‹è¯• Profile | `.p7b` | åŒ…å«äº†åŒ…åã€æ•°å­—è¯ä¹¦ä¿¡æ¯ã€ç”³è¯·çš„æƒé™åˆ—è¡¨ã€è®¾å¤‡åˆ—è¡¨ç­‰ä¿¡æ¯ |
| å…¬ç§é’¥æ–‡ä»¶ | `.p12` | åŒ…å«éå¯¹ç§°åŠ å¯†ä¸­ä½¿ç”¨çš„å…¬é’¥å’Œç§é’¥ |

**å®˜æ–¹å†…éƒ¨æµ‹è¯•æµç¨‹ï¼š**

<div align="center">
<img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/3.jpeg" alt="HarmonyOS å†…éƒ¨æµ‹è¯•æµç¨‹" style="max-width: 100%; height: auto;">
</div> 



#### ç¯å¢ƒè¦æ±‚

| å·¥å…· | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| hvigorwã€hdc | æœ€æ–°ç‰ˆ | DevEco Studio è‡ªå¸¦é›†æˆï¼Œä¹Ÿå¯å•ç‹¬å®‰è£… |
| JDK | 17+ | ç­¾åå·¥å…·ä¾èµ– |
| Python | 3.10+ | hpack è¿è¡Œç¯å¢ƒ |

**ç¯å¢ƒæ£€æŸ¥å‘½ä»¤ï¼š**

```bash
# æ£€æŸ¥å„å·¥å…·æ˜¯å¦æ­£ç¡®å®‰è£…
java --version          # æ£€æŸ¥ JDK ç‰ˆæœ¬
python --version        # æ£€æŸ¥ Python ç‰ˆæœ¬
hvigorw -v              # æ£€æŸ¥ hvigorwï¼ˆéœ€é…ç½®ç¯å¢ƒå˜é‡ï¼‰
hdc -v                  # æ£€æŸ¥ hdcï¼ˆéœ€é…ç½®ç¯å¢ƒå˜é‡ï¼‰
```

> âš ï¸ **æ³¨æ„**ï¼š`hvigorw` å’Œ `hdc` æ˜¯ DevEco-Studio è‡ªå¸¦å·¥å…·ï¼Œåœ¨å…¶ä»–ç»ˆç«¯å·¥å…·ä¸‹ä½¿ç”¨ï¼Œéœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¯¦è§ä¸‹æ–¹ Tips éƒ¨åˆ†ã€‚



### å¿«é€Ÿå¼€å§‹

##### 1ã€åˆå§‹åŒ–é¡¹ç›®

åœ¨**é¡¹ç›®æ ¹ç›®å½•**ä¸‹æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼š

```bash
hpack init
```

åˆå§‹åŒ–å®Œæˆåï¼Œä¼šç”Ÿæˆ `hpack` ç›®å½•ç»“æ„ï¼š

```
hpack/
â”œâ”€â”€ config.py      # é…ç½®æ–‡ä»¶ï¼šæœåŠ¡å™¨ã€åº”ç”¨ä¿¡æ¯å’Œæ‰“åŒ…ç­¾åç­‰
â”œâ”€â”€ Packfile.py    # å›è°ƒæ–‡ä»¶ï¼šæ‰“åŒ…å®Œæˆåçš„è‡ªå®šä¹‰å¤„ç†é€»è¾‘
â””â”€â”€ sign/          # è¯ä¹¦ç›®å½•ï¼šå­˜æ”¾ç­¾åè¯ä¹¦æ–‡ä»¶
```

##### 2ã€ä¿®æ”¹é…ç½®

æ‰“å¼€ `hpack/config.py` æ–‡ä»¶ï¼Œæ ¹æ®å®é™…æƒ…å†µï¼Œä¿®æ”¹é…ç½®ä¿¡æ¯ï¼š

```python
class Config: 
    # å®‰è£…åŒ…å­˜æ”¾çš„æœåŠ¡å™¨çš„åŸŸå 
    DeployDomain = 'static.hpack.com'

    # å®‰è£…åŒ…å­˜æ”¾çš„æœåŠ¡å™¨åœ°å€ï¼Œå¿…é¡»æ˜¯ https
    BaseURL = f"https://{DeployDomain}/hpack"
    
    # åº”ç”¨ä¿¡æ¯ 
    AppIcon = f"{BaseURL}/AppIcon.png"
    AppName = 'hpack'
    Badge = 'é¸¿è’™ç‰ˆ'
    
    # indexæ¨¡æ¿é€‰æ‹©, å¯é€‰å€¼ä¸º [default, simple, tech, cartoon, tradition, custom]
    # å¦‚æœæ˜¯ customï¼Œåˆ™è¡¨ç¤ºè‡ªå®šä¹‰æ¨¡æ¿ï¼Œéœ€è¦è‡ªå·±åœ¨ hpack ç›®å½•å†™ä¸€ä¸ª index.htmlï¼Œ
    # æ‰“åŒ…å®Œæˆåè¿›è¡Œå†…å®¹å¡«å……ï¼Œå†å†™å…¥ hpack/build/{product} ç›®å½•
    IndexTemplate = "default" 
    
    # æ‰“åŒ…ç­¾åé…ç½® 
    Alias = 'your key alias'
    KeyPwd = 'your key password'
    KeystorePwd = 'your store password'
    # æ›¿æ¢ hapck/sign ç›®å½•ä¸‹çš„è¯ä¹¦æ–‡ä»¶
    SignDir = 'sign'
    Cert = os.path.join(SignDir, 'release.cer') 
    Profile = os.path.join(SignDir, 'test_release.p7b')  
    Keystore =  os.path.join(SignDir, 'harmony.p12')
  
    # ä»¥ä¸‹æ˜¯ v1.0.1 æ–°å¢è‡ªå®šä¹‰æ„å»ºé…ç½® ===================
    # ä»v1.0.0å‡çº§ä¸Šæ¥çš„ï¼Œå¯è‡ªè¡ŒåŠ ä¸Š
    
    # è®¾ç½®é»˜è®¤æ‰“åŒ… product
    # ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªæŒ‡å®šçš„ productã€‚
    # ä¸è®¾ç½®ï¼Œåˆ™é€šè¿‡è¯» build-prodile.json5 è·å–ï¼Œå­˜åœ¨å¤šä¸ªæ—¶ï¼Œæ‰“åŒ…å‰ä¼šæç¤ºé€‰æ‹©
    Product = ""  
    
    # ç¼–è¯‘æ¨¡å¼ï¼Œé»˜è®¤æ˜¯ debug æ¨¡å¼ï¼Œrelease æ¨¡å¼éœ€è¦è®¾ç½®ä¸ºFalse
    Debug = True  
    
    # ç”¨äºå®Œå…¨è‡ªå®šä¹‰ hvigorw æ„å»ºå‘½ä»¤ï¼Œé…ç½®å Productã€Debug æ— æ•ˆ
    # hvigorw ä½¿ç”¨ https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-commandline
    # ä½¿ç”¨ç¤ºä¾‹ï¼š
    # [
    #    'hvigorw', 'assembleHap', 'assembleHsp', 
    #    '--mode', 'module', 
    #    '-p', 'product=default', 
    #    '-p', 'debuggable=true',
    #    '--no-daemon'
    # ]
    HvigorwCommand = []

    # å†å²ç‰ˆæœ¬æŒ‰é’® - v1.0.9 æ–°å¢é…ç½®
    HistoryBtn = False  # æ˜¯å¦æ˜¾ç¤ºå†å²ç‰ˆæœ¬æŒ‰é’®,é»˜è®¤ä¸å¼€å¯ Ture/False
    HistoryBtnTitle = "å†å²ç‰ˆæœ¬" # å¯è‡ªå®šä¹‰æ ‡é¢˜
    HistoryBtnUrl = "https://github.com/iHongRen/hpack/history.html" # å†å²ç‰ˆæœ¬é¡µé¢urlåœ°å€
```

å°†ä½ çš„è¯ä¹¦æ–‡ä»¶æ”¾å…¥ `hpack/sign/` ç›®å½•ï¼š

```
sign/
â”œâ”€â”€ harmony.p12        # å…¬ç§é’¥æ–‡ä»¶
â”œâ”€â”€ release.cer        # å‘å¸ƒè¯ä¹¦  
â””â”€â”€ test_release.p7b   # å†…éƒ¨æµ‹è¯•Profile
```



##### 3ã€å¼€å§‹æ‰“åŒ…

```bash
hpack p "ä¿®å¤äº†ä¸€äº›å·²çŸ¥é—®é¢˜ï¼Œä¼˜åŒ–äº†æ€§èƒ½"  # æ›´æ–°è¯´æ˜å¯é€‰
```

âœ… **æ‰“åŒ…å®Œæˆå**ï¼Œæ‰€æœ‰æ‰“åŒ…æ–‡ä»¶å°†ä¿å­˜åœ¨ `hpack/build/{product}/` ç›®å½•ä¸‹ã€‚  

å¯æ‰§è¡Œå‘½ä»¤å®‰è£…åˆ°å½“å‰è¿æ¥çš„è®¾å¤‡ï¼š

```sh
hpack i -[product]
```



## ğŸ“Š æ‰“åŒ…ä¿¡æ¯è¯´æ˜

æ‰“åŒ…å®Œæˆåï¼Œ`PackFile.py` ä¸­çš„ `didPack` æ–¹æ³•ä¼šæ¥æ”¶åˆ°è¯¦ç»†çš„æ‰“åŒ…ä¿¡æ¯ï¼š

```python
def didPack(packInfo):
    """æ‰“åŒ…å®Œæˆå›è°ƒï¼Œé€šå¸¸åœ¨è¿™é‡Œä¸Šä¼ æ‰“åŒ…ç»“æœåˆ°æœåŠ¡å™¨"""
    print(json.dumps(packInfo, indent=4, ensure_ascii=False))
```

#### ç¤ºä¾‹è¾“å‡º
```json
{
    "bundle_name": "com.cxy.hpack",
    "version_code": 1000000,
    "version_name": "1.0.0",
    "size": "281KB",
    "desc": "æ‰“åŒ…è¯´æ˜",
    "build_dir": "hpack/build/default",
    "remote_dir": "20250605200049",
    "manifest_url": "https://æœåŠ¡å™¨åŸŸå/hpack/20250605200049/manifest.json5",
    "index_url": "https://æœåŠ¡å™¨åŸŸå/hpack/20250605200049/index.html",
    "product": "default",
    "date": "2025-06-05 20:00:49",
    "willPack_output": "willPackä¸­æ‰“åŒ…å‰ä¼ å…¥çš„å‚æ•°",
    "qrcode": "data:image/svg+xml;charset=utf-8,xxx...",
}
```


#### ä¿¡æ¯å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `bundle_name` | String | åº”ç”¨åŒ…å |
| `version_code` | Number | ç‰ˆæœ¬å· |
| `version_name` | String | ç‰ˆæœ¬åç§° |
| `size` | String | åŒ…å¤§å° |
| `desc` | String | æ‰“åŒ…è¯´æ˜ |
| `build_dir` | String | æœ¬åœ°æ„å»ºç›®å½• |
| `remote_dir` | String | è¿œç¨‹ç›®å½•åï¼ˆæ—¶é—´æˆ³ï¼‰ |
| `manifest_url` | String | manifest.json5 æ–‡ä»¶ URL |
| `index_url` | String | åˆ†å‘é¡µé¢ URL |
| `product` | String | é€‰æ‹©çš„ product |
| `date` | String | æ‰“åŒ…æ—¶é—´ |
| `willPack_output` | String | æ‰“åŒ…å‰ä¼ å…¥çš„å‚æ•° |
| `qrcode` | String | äºŒç»´ç  base64 æ•°æ® |



## è‡ªå®šä¹‰ä¸Šä¼ åˆ°æœåŠ¡å™¨

æ‰“åŒ…å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰“åŒ…æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¸`config.py`ä¸­ `BaseURL`ä¸€è‡´ï¼Œ è¿™æ ·æˆ‘ä»¬æ‰èƒ½ä½¿ç”¨ [Deeplink](https://developer.huawei.com/consumer/cn/doc/app/agc-help-internal-test-release-app-0000002260691994) å½¢å¼å®‰è£…ã€‚

```python
def didPack(packInfo):
    """æ‰“åŒ…åå›è°ƒï¼Œé€šå¸¸åœ¨è¿™é‡Œä¸Šä¼ æ‰“åŒ…ç»“æœåˆ°æœåŠ¡å™¨"""
    # æ‰“åŒ…ç»“æœåœ¨ hpack/build/{product}ï¼Œç¼–å†™ä½ çš„ä¸Šä¼ é€»è¾‘
    pass
```

åœ¨é¡¹ç›®çš„ `custom/`ç›®å½•ä¸­ï¼Œæä¾›äº†ä¸€äº›ä¸Šä¼ ç¤ºä¾‹ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ°ä½ çš„ `PackFile.py` ä¸­ä½¿ç”¨ï¼š

-  é˜¿é‡Œäº‘ OSS ä¸Šä¼  :  [OSS_PackFile.py](https://raw.githubusercontent.com/iHongRen/hpack/main//custom/OSS_PackFile.py)

- è’²å…¬è‹±ä¸Šä¼ ï¼š[PGY_PackFile.py](https://raw.githubusercontent.com/iHongRen/hpack/main//custom/PGY_PackFile.py)
- å…¶ä»–ï¼šæ¬¢è¿ PR



## è¿è¡Œç¤ºä¾‹

##### ğŸš€ å¼€å§‹æ‰“åŒ…
<img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/0.png" alt="å¼€å§‹æ‰“åŒ…" style="max-width: 100%; height: auto;">

#####  é€‰æ‹© Product (å¤šç›®æ ‡äº§ç‰©æƒ…å†µ)
<img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/2.png" alt="é€‰æ‹©Product" style="max-width: 100%; height: auto;">

#####  âœ… æ‰“åŒ…å®Œæˆ
<img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/1.png" alt="æ‰“åŒ…å®Œæˆ" style="max-width: 100%; height: auto;">


##### æ‰«ç å®‰è£…
<img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/install.png" alt="æ‰«ç å®‰è£…" width="300" style="max-width: 100%; height: auto;">




## è‡ªå®šä¹‰åˆ†å‘é¡µ

**1ã€å¯ç”¨è‡ªå®šä¹‰æ¨¡æ¿**
ä¿®æ”¹ `config.py` æ–‡ä»¶ï¼š

```python
IndexTemplate = 'custom'  # å¯ç”¨è‡ªå®šä¹‰æ¨¡æ¿
```

**2ã€ç”Ÿæˆæ¨¡æ¿æ–‡ä»¶**
ä½¿ç”¨å†…ç½®æ¨¡æ¿ä½œä¸ºåŸºç¡€ï¼š

```bash
# ç”ŸæˆæŒ‡å®šæ¨¡æ¿
hpack template [tname]  # ç®€å†™ï¼šhpack t tech

# å¯é€‰æ¨¡æ¿ï¼šdefault, simple, tech, cartoon, tradition
# ä¸æŒ‡å®šåˆ™é»˜è®¤ä½¿ç”¨ default æ¨¡æ¿
```

> ğŸ’¡ **æç¤º**ï¼šå‘½ä»¤ä¼šåœ¨ `hpack/` ç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„ `index.html` æ¨¡æ¿æ–‡ä»¶

**3ã€é…ç½®æ¨¡æ¿å¤„ç†**
åœ¨ `Packfile.py` ä¸­å¯ç”¨è‡ªå®šä¹‰æ¨¡æ¿å¤„ç†ï¼š

```python
def customTemplateHtml(templateInfo):
    packInfo = templateInfo["packInfo"]
    html = templateInfo["html"]
    
    # å¡«å……æ¨¡æ¿å˜é‡
    template = Template(html)
    html_template = template.safe_substitute(
        app_icon=Config.AppIcon,
        title=Config.AppName,
        badge=Config.Badge,
        date=packInfo["date"],
        version_name=packInfo["version_name"],
        version_code=packInfo["version_code"],
        size=packInfo["size"],
        desc=packInfo["desc"],
        manifest_url=packInfo["manifest_url"],
        qrcode=packInfo["qrcode"]
    )
    print(html_template)  # âš ï¸ ä¸å¯åˆ é™¤ï¼Œç”¨äºä¼ å‚

# è°ƒç”¨å¤„ç†å‡½æ•°
if __name__ == "__main__":    
    # ...çœç•¥çš„ä»£ç 
    elif args.t:
        templateInfo = json.loads(sys.stdin.read())  
        customTemplateHtml(templateInfo) 
```

**4ã€æ‰§è¡Œæ‰“åŒ…**

```bash
hpack p 'è‡ªå®šä¹‰index.html'
```



## æ¨¡æ¿é¢„è§ˆ

hpack æä¾›å¤šç§å†…ç½®åˆ†å‘é¡µæ¨¡æ¿ï¼Œæ»¡è¶³ä¸åŒé£æ ¼çš„éœ€æ±‚ï¼š

```python
# config.py ä¸­é…ç½®æ¨¡æ¿
IndexTemplate = "default"  # å¯é€‰å€¼ï¼š[default, simple, tech, cartoon, tradition, custom]
```

| <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/default.png" width="300"> | <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/simple.png" width="300"> | <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/tech.png" width="300"> |
| :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                       default é»˜è®¤é£æ ¼                       |                         simple ç®€å•                          |                          tech ç§‘æŠ€                           |

| <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/cartoon.png" width="300"> | <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/tradition.png" width="300"> |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
|                         cartoon å¡é€š                         |                        tradition ä¼ ç»Ÿ                        |



## è‡ªå®šä¹‰æ‰“åŒ…å†å²  - v1.0.9 æ–°å¢åŠŸèƒ½

**1ã€å®Œæˆå†å²åŒ…ä¿¡æ¯ `history.json` æ–‡ä»¶çš„ä¸Šä¼ **

ä½ å¯ä»¥å‚ç…§ [custom/OSS_PackFile.py](https://raw.githubusercontent.com/iHongRen/hpack/main/custom/OSS_PackFile.py) ä¸­çš„ä»£ç ï¼Œå¤§è‡´é€»è¾‘æ˜¯ï¼š

æ‹‰å–æœåŠ¡å™¨ä¸Šçš„çš„ `history.json` -> æ‹¼æ¥ä¸Šæœ€æ–°çš„æ‰“åŒ…ä¿¡æ¯ï¼Œç»„æˆæ–°çš„ `history.json` -> é‡æ–°ä¸Šä¼ `history.json `è¦†ç›–æ—§çš„ã€‚

**2ã€å¼€å¯å†å²ç‰ˆæœ¬æŒ‰é’®**

åœ¨åˆ†å‘é¡µä¼šæ˜¾ç¤º 'å†å²ç‰ˆæœ¬' æŒ‰é’®ï¼Œç‚¹å‡»è·³è½¬åˆ°å†å²æ‰“åŒ…é¡µé¢ `HistoryBtnUrl`

```python
# å¦‚æœä»è€ç‰ˆæœ¬å‡çº§è€Œæ¥ï¼Œéœ€è¦è‡ªå·±æ·»åŠ è¿™ä¸‰ä¸ªå­—æ®µã€‚æˆ–è€…é‡æ–° hpack init
class Config: 
    # ...
    HistoryBtn = False  # æ˜¯å¦æ˜¾ç¤ºå†å²ç‰ˆæœ¬æŒ‰é’®,é»˜è®¤ä¸å¼€å¯ Ture/False
    HistoryBtnTitle = "å†å²ç‰ˆæœ¬" # å¯è‡ªå®šä¹‰æ ‡é¢˜
    HistoryBtnUrl = "https://github.com/iHongRen/hpack/history.html" # å†å²ç‰ˆæœ¬é¡µé¢urlåœ°å€
```

**3ã€éƒ¨ç½²å†å²æ‰“åŒ…é¡µé¢**

[custom/history.html](https://raw.githubusercontent.com/iHongRen/hpack/main/custom/history.html)ï¼Œæä¾›äº†ä¸€ä¸ªæ¨¡æ¿ï¼Œä¸‹è½½åç¨ä½œä¿®æ”¹ï¼Œç„¶åéƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ã€‚

```js
// history.html æ–‡ä»¶ï¼Œä¿®æ”¹
const config = {
  baseUrl: 'https://æœåŠ¡å™¨ä¸Šå†å²jsonçš„ä½ç½®/history.json',
  iconUrl: 'å†å²é¡µé¢icon url',
  pageSize: 12 //åˆ†é¡µå¤§å°
}

// è‡ªå®šä¹‰åˆ¤æ–­,ä¸»é¢˜é¢œè‰²
const getPackColor = (packText = '') => {
    if (packText.includes('æµ‹è¯•')) return 'success'
    if (packText.includes('éªŒæ”¶')) return 'warning'
    if (packText.includes('æ­£å¼')) return 'primary'
    return 'secondary'
}
```

**4ã€è¿è¡Œæ•ˆæœ**

ä¸‹é¢ä½¿ç”¨ [custom/history.json](custom/history.json) ä¸­çš„æ•°æ®åšæ¼”ç¤ºï¼š
| <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/history_pack.png" width="320> |        <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/history_app.png" width="320"> |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
|                      åˆ†å‘é¡µ index.html                       |                     ç§»åŠ¨ç«¯ history.html                      |
<br>

| <img src="https://raw.githubusercontent.com/iHongRen/hpack/main/screenshots/history_pc.png"> |
| :----------------------------------------------------------:   |
|                       PCç«¯ history.html                        |



## å¦‚ä½•è‡ªå®šä¹‰ webhook é€šçŸ¥ 

ä¸Šä¼ å®Œæˆåï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ webhook å‘é€æ¶ˆæ¯åˆ°ç¾¤èŠï¼Œé€šçŸ¥æµ‹è¯•äººå‘˜å®‰è£…æœ€æ–°åŒ…ã€‚

æ¨¡æ¿ä¸­æä¾›äº†**é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦**ç­‰å¹³å°çš„ webhook ä½¿ç”¨ç¤ºä¾‹ã€‚

å‚è§ï¼š[custom/Webhook_PackFile.py](https://raw.githubusercontent.com/iHongRen/hpack/main//custom/Webhook_PackFile.py)

```python
# ä»¥é’‰é’‰ä¸ºä¾‹
def dingtalk(packInfo):
    """_summary_: é’‰é’‰æœºå™¨äºº"""
    WEBHOOK = "https://oapi.dingtalk.com/robot/send?access_token=ä½ çš„token"
    bot = DingTalkBot(WEBHOOK)
    bot.send_text("æµ‹è¯•")
    bot.send_link(title="Pythonå®˜ç½‘", text="Pythonå®˜æ–¹ç½‘ç«™", message_url="https://www.python.org/")
    bot.send_markdown(title="Markdownæµ‹è¯•", text="## äºŒçº§æ ‡é¢˜\n- åˆ—è¡¨1\n- åˆ—è¡¨2")
```

âš ï¸ webhook ç›¸å…³çš„ä»£ç éƒ½æ˜¯ç”± ai ç¼–å†™ï¼Œä½œè€…æ²¡æœ‰ç›¸å…³ç¯å¢ƒï¼Œæ— æ³•éªŒè¯æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿æ  [issue](https://github.com/iHongRen/hpack/issues) ã€‚




## å‘½ä»¤å‚è€ƒ

##### æŸ¥çœ‹å‘½ä»¤
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `hpack -v, --version` | æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ |
| `hpack -h, --help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `hpack -u, --udid` | æ˜¾ç¤ºè®¾å¤‡çš„ UDID |
| `hpack targets` | æ˜¾ç¤ºè¿æ¥çš„è®¾å¤‡åˆ—è¡¨ |

##### æ‰§è¡Œå‘½ä»¤
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `hpack init` | åˆå§‹åŒ– hpack ç›®å½•å¹¶åˆ›å»ºé…ç½®æ–‡ä»¶ |
| `hpack pack, p [desc]` | æ‰§è¡Œæ‰“åŒ…ç­¾åå’Œä¸Šä¼ ï¼Œdesc ä¸ºæ‰“åŒ…æè¿°ï¼ˆå¯é€‰ï¼‰ |
| `hpack template, t [tname]` | ç”Ÿæˆ index.html æ¨¡æ¿æ–‡ä»¶ |

##### å®‰è£…æ‰“åŒ…äº§ç‰©
```bash
# å®‰è£…æŒ‡å®š product çš„äº§ç‰©
hpack i -myproduct  # æ³¨æ„åŠ ä¸Šæ¨ªæ (-)
```

##### å®‰è£…å·²ç­¾ååŒ…
```bash
# å®‰è£… .app æ–‡ä»¶
hpack i ./xx.app

# å®‰è£… .hap æ–‡ä»¶  
hpack i ./xx.hap

# å®‰è£…ç›®å½•ä¸‹æ‰€æœ‰åŒ…
hpack i ./build/default
```

##### ç­¾åå‘½ä»¤

```bash
hpack sign,s <unsignedPath> <certPath>
```

ä½¿ç”¨ç¤ºä¾‹
```bash
# ç­¾å .app æ–‡ä»¶
hpack s ./xx.app ./sign/cert.py

# ç­¾å .hap æ–‡ä»¶
hpack s ./xx.hap ./sign/cert.py

# ç­¾åç›®å½•
hpack s ./build/default ./sign/cert.py
```

è¯ä¹¦ç›®å½•ç»“æ„
```
sign/
â”œâ”€â”€ cert.py          # ç­¾åé…ç½®æ–‡ä»¶
â”œâ”€â”€ certFile.cer     # è¯ä¹¦æ–‡ä»¶
â”œâ”€â”€ keystore.p12     # å…¬ç§é’¥æ–‡ä»¶
â””â”€â”€ profile.p7b      # Profile æ–‡ä»¶
```

cert.py é…ç½®ç¤ºä¾‹
```python
# -*- coding: utf-8 -*-
Alias = 'key alias' 
KeyPwd = 'key password' 
KeystorePwd = 'store password' 
Cert = './certFile.cer'      # ç›¸å¯¹äºcert.pyçš„è·¯å¾„
Profile = './profile.p7b'    # ç›¸å¯¹äºcert.pyçš„è·¯å¾„
Keystore = './keystore.p12'  # ç›¸å¯¹äºcert.pyçš„è·¯å¾„
```

<br>

## ğŸ’¡ Tips

##### é…ç½®ç¯å¢ƒå˜é‡
åœ¨**é DevEco-Studio** ç»ˆç«¯ä¸­ä½¿ç”¨æ—¶éœ€è¦é…ç½®ï¼š

```bash
# macOS
# .zshrc æ–‡ä»¶
export DEVECO_SDK_HOME=/Applications/DevEco-Studio.app/Contents/sdk

# Windows
# å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-commandline
```

##### Git å¿½ç•¥é…ç½®
åœ¨ `.gitignore` æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```gitignore
# å¿½ç•¥ Python ä¸´æ—¶æ–‡ä»¶
__pycache__/
```

#####  âš ï¸ å¸¸è§é—®é¢˜

**è¯ä¹¦ç›¸å…³**

- è¯ä¹¦ä¸ä¸€è‡´ï¼šå¦‚æœå·²å®‰è£…çš„ App å’Œå‡†å¤‡å®‰è£…çš„ App æ‰“åŒ…è¯ä¹¦ä¸ä¸€è‡´ï¼Œéœ€å…ˆå¸è½½å·²å®‰è£…çš„ App
- Profile ç±»å‹ï¼š
  - ä½¿ç”¨**è°ƒè¯•.p7b**ï¼šåªèƒ½æœ¬åœ°å‘½ä»¤å®‰è£…
  - ä½¿ç”¨**å†…éƒ¨æµ‹è¯• Profile.p7b**ï¼šæ‰èƒ½é€šè¿‡ **DeepLink** (é“¾æ¥) å½¢å¼å®‰è£…

**ç½‘ç»œç›¸å…³**

- è”ç½‘æ ¡éªŒï¼šå®‰è£…æ—¶é¸¿è’™ä¼šè¿›è¡Œè”ç½‘æ ¡éªŒï¼Œå¦‚æœéªŒè¯å¤±è´¥ï¼Œå°è¯•å…³é—­ä»£ç†

- é”™è¯¯ç ï¼šå®‰è£…å‡ºé”™æ—¶ä¼šæœ‰æç¤ºï¼Œå¯æ ¹æ® [é”™è¯¯ç è¯´æ˜](https://developer.huawei.com/consumer/cn/doc/app/agc-help-internal-test-errorcode-0000002295325157) æŸ¥æ‰¾åŸå› 

  


## æ”¯æŒé¡¹ç›®

å¦‚æœ hpack å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ï¼š
- â­ ç»™é¡¹ç›®ç‚¹ä¸ª [Star](https://github.com/iHongRen/hpack)
- ğŸ”„ åˆ†äº«ç»™æ›´å¤šå¼€å‘è€…
- ğŸ’¬ åœ¨ç¤¾åŒºä¸­æ¨èä½¿ç”¨
