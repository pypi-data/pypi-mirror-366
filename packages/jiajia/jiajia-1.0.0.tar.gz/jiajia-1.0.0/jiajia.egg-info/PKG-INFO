Metadata-Version: 2.1
Name: jiajia
Version: 1.0.0
Summary: RSA-AESæ··åˆåŠ å¯†æ¡†æ¶ï¼Œæä¾›éå¯¹ç§°åŠ å¯†ã€å¯¹ç§°åŠ å¯†ã€æ•°å­—ç­¾åç­‰åŠŸèƒ½
Home-page: https://github.com/xiatian/rsa-aes-hybrid-crypto-framework
Author: å¤äº‘é¾™
Author-email: 1900098962@qq.com
License: UNKNOWN
Project-URL: Bug Reports, https://github.com/xiatian/rsa-aes-hybrid-crypto-framework/issues
Project-URL: Source, https://github.com/xiatian/rsa-aes-hybrid-crypto-framework
Project-URL: Documentation, https://github.com/xiatian/rsa-aes-hybrid-crypto-framework/blob/main/README.md
Description: # RSA-AES æ··åˆåŠ å¯†æ¡†æ¶
        
        è¿™æ˜¯ä¸€ä¸ªåŸºäº **RSA + AES + HMAC** çš„æ··åˆåŠ å¯†æ¡†æ¶ï¼Œæä¾›éå¯¹ç§°åŠ å¯†ã€å¯¹ç§°åŠ å¯†ã€æ•°å­—ç­¾åç­‰åŠŸèƒ½ã€‚**å¯ä»¥ç›´æ¥åœ¨å…¶ä»–é¡¹ç›®ä¸­importä½¿ç”¨ï¼Œæ— éœ€Dockeréƒ¨ç½²**ã€‚
        
        ## ğŸ” æŠ€æœ¯æ ˆ
        
        - **RSA 2048/4096**: éå¯¹ç§°åŠ å¯†ï¼Œç”¨äºå¯†é’¥äº¤æ¢
        - **AES 256 (GCM/CBC)**: å¯¹ç§°åŠ å¯†ï¼Œç”¨äºæ•°æ®åŠ å¯†
        - **HMAC-SHA256**: æ•°å­—ç­¾åï¼Œç”¨äºæ•°æ®å®Œæ•´æ€§éªŒè¯
        - **Python Cryptography**: åº•å±‚åŠ å¯†åº“
        - **Redis/Memory**: ç¼“å­˜åç«¯æ”¯æŒ
        
        ## ğŸ¯ åŸºç¡€ä½¿ç”¨
        
        ### æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
        
        ```python
        # 1. å¯¼å…¥æ¡†æ¶
        from encryption_framework import key_exchange_sync, encrypt_data_sync, decrypt_data_sync
        
        # 2. å¯†é’¥äº¤æ¢
        result = key_exchange_sync("my_client")
        session_id = result["session_id"]
        
        # 3. åŠ å¯†æ•°æ®
        data = {"message": "Hello, World!", "user_id": 123}
        encrypted = encrypt_data_sync(data, session_id)
        
        # 4. è§£å¯†æ•°æ®
        decrypted = decrypt_data_sync(encrypted)
        print(decrypted["data"])  # è¾“å‡ºåŸå§‹æ•°æ®
        ```
        
        ### å®Œæ•´ç¤ºä¾‹
        
        ```python
        from encryption_framework import key_exchange_sync, encrypt_data_sync, decrypt_data_sync
        
        def encrypt_user_data(user_data):
            """åŠ å¯†ç”¨æˆ·æ•°æ®"""
            # å¯†é’¥äº¤æ¢
            result = key_exchange_sync("user_client")
            if not result["success"]:
                raise Exception("å¯†é’¥äº¤æ¢å¤±è´¥")
            
            session_id = result["session_id"]
            
            # åŠ å¯†æ•°æ®
            encrypted = encrypt_data_sync(user_data, session_id)
            if not encrypted["success"]:
                raise Exception("æ•°æ®åŠ å¯†å¤±è´¥")
            
            return encrypted
        
        def decrypt_user_data(encrypted_data):
            """è§£å¯†ç”¨æˆ·æ•°æ®"""
            decrypted = decrypt_data_sync(encrypted_data)
            if not decrypted["success"]:
                raise Exception("æ•°æ®è§£å¯†å¤±è´¥")
            
            return decrypted["data"]
        
        # ä½¿ç”¨ç¤ºä¾‹
        user_data = {"user_id": 123, "name": "å¼ ä¸‰", "email": "zhangsan@example.com"}
        encrypted = encrypt_user_data(user_data)
        decrypted = decrypt_user_data(encrypted)
        print(decrypted)  # è¾“å‡ºåŸå§‹æ•°æ®
        ```
        
        ## ğŸ“ é¡¹ç›®ç»“æ„
        
        ```
        rsa-aes-hybrid-crypto-framework/
        â”œâ”€â”€ encryption_framework/            # ğŸ¯ æ··åˆåŠ å¯†æ¡†æ¶ï¼ˆå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼‰
        â”‚   â”œâ”€â”€ __init__.py                 # ä¸»å…¥å£ï¼ˆimportå…¥å£ï¼‰
        â”‚   â”œâ”€â”€ config.py                   # é…ç½®ç®¡ç†
        â”‚   â”œâ”€â”€ encryption_core.py          # RSA+AESæ ¸å¿ƒåŠ å¯†åŠŸèƒ½
        â”‚   â”œâ”€â”€ session_manager.py          # ä¼šè¯ç®¡ç†
        â”‚   â”œâ”€â”€ encryption_api.py           # ç»Ÿä¸€APIæ¥å£
        â”‚   â”œâ”€â”€ utils.py                    # ä¾¿æ·å‡½æ•°
        â”‚   â””â”€â”€ example_usage.py            # ä½¿ç”¨ç¤ºä¾‹
        â”œâ”€â”€ requirements.txt                 # é¡¹ç›®ä¾èµ–
        â”œâ”€â”€ README.md                       # é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
        â””â”€â”€ .gitignore                      # Gitå¿½ç•¥æ–‡ä»¶
        ```
        
        ## ğŸš€ å¿«é€Ÿå¼€å§‹
        
        ### 1. å¤åˆ¶æ¡†æ¶åˆ°ä½ çš„é¡¹ç›®
        
        ```bash
        # å¤åˆ¶æ•´ä¸ªæ¡†æ¶æ–‡ä»¶å¤¹åˆ°ä½ çš„é¡¹ç›®
        cp -r encryption_framework/ your_project/
        # æˆ–è€…å¤åˆ¶æ•´ä¸ªé¡¹ç›®
        cp -r rsa-aes-hybrid-crypto-framework/ your_project/
        ```
        
        ### 2. å®‰è£…ä¾èµ–
        
        ```bash
        pip install cryptography
        # å¯é€‰ï¼šå¦‚æœéœ€è¦Redisç¼“å­˜
        pip install redis
        ```
        
        ### 3. ç›´æ¥importä½¿ç”¨
        
        ```python
        # æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
        from encryption_framework import key_exchange_sync, encrypt_data_sync, decrypt_data_sync
        
        # å¯†é’¥äº¤æ¢
        result = key_exchange_sync("my_client")
        session_id = result["session_id"]
        
        # åŠ å¯†æ•°æ®
        data = {"message": "Hello, World!", "user_id": 123}
        encrypted = encrypt_data_sync(data, session_id)
        
        # è§£å¯†æ•°æ®
        decrypted = decrypt_data_sync(encrypted)
        print(decrypted["data"])  # è¾“å‡ºåŸå§‹æ•°æ®
        ```
        
        ## ğŸ¯ æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼
        
        ### æ–¹å¼1ï¼šåŒæ­¥å‡½æ•°ï¼ˆæœ€ç®€å•ï¼‰
        
        ```python
        from encryption_framework import (
            key_exchange_sync,
            encrypt_data_sync, 
            decrypt_data_sync
        )
        
        # ä¸€é”®ä½¿ç”¨ï¼Œæ— éœ€é…ç½®
        result = key_exchange_sync("client_id")
        session_id = result["session_id"]
        
        # åŠ å¯†
        data = {"user_id": 123, "message": "Hello"}
        encrypted = encrypt_data_sync(data, session_id)
        
        # è§£å¯†
        decrypted = decrypt_data_sync(encrypted)
        print(decrypted["data"])
        ```
        
        ### æ–¹å¼2ï¼šå¼‚æ­¥å‡½æ•°
        
        ```python
        import asyncio
        from encryption_framework import key_exchange, encrypt_data, decrypt_data
        
        async def main():
            # å¯†é’¥äº¤æ¢
            result = await key_exchange("client_id", "1.0.0")
            session_id = result["session_id"]
            
            # åŠ å¯†
            data = {"message": "Hello, World!"}
            encrypt_result = await encrypt_data(data, session_id)
            
            # è§£å¯†
            decrypt_result = await decrypt_data(encrypt_result)
            print(decrypt_result["data"])
        
        # è¿è¡Œ
        asyncio.run(main())
        ```
        
        ### æ–¹å¼3ï¼šAPIç±»ï¼ˆé«˜çº§ç”¨æ³•ï¼‰
        
        ```python
        import asyncio
        from encryption_framework import EncryptionAPI, SecurityConfig
        
        async def main():
            # åˆ›å»ºé…ç½®
            config = SecurityConfig(
                rsa_key_size=2048,
                aes_key_size=32,
                session_expire_time=3600,
                cache_backend="memory"
            )
            
            # åˆ›å»ºAPIå®ä¾‹
            api = EncryptionAPI(config)
            
            # å¯†é’¥äº¤æ¢
            result = await api.key_exchange("client_id", "1.0.0")
            session_id = result["session_id"]
            
            # åŠ å¯†æ•°æ®
            data = {"message": "Hello, World!"}
            encrypt_result = await api.encrypt_data(data, session_id)
            
            # è§£å¯†æ•°æ®
            decrypt_result = await api.decrypt_data(encrypt_result)
            print(decrypt_result["data"])
        
        # è¿è¡Œ
        asyncio.run(main())
        ```
        
        ## ğŸŒ å‰åç«¯åˆ†ç¦»ä½¿ç”¨
        
        ### åç«¯APIè®¾ç½®
        
        ```python
        # åç«¯API (FastAPIç¤ºä¾‹)
        from fastapi import FastAPI, HTTPException
        from pydantic import BaseModel
        from encryption_framework import key_exchange_sync, encrypt_data_sync, decrypt_data_sync
        
        app = FastAPI()
        
        class EncryptRequest(BaseModel):
            data: dict
        
        class DecryptRequest(BaseModel):
            encrypted_data: dict
        
        @app.post("/api/secure/encrypt")
        async def encrypt_data(request: EncryptRequest):
            try:
                # å¯†é’¥äº¤æ¢
                result = key_exchange_sync("web_client")
                session_id = result["session_id"]
                
                # åŠ å¯†æ•°æ®
                encrypted = encrypt_data_sync(request.data, session_id)
                
                return {
                    "success": True,
                    "encrypted_data": encrypted,
                    "session_id": session_id
                }
            except Exception as e:
                raise HTTPException(status_code=500, detail=str(e))
        
        @app.post("/api/secure/decrypt")
        async def decrypt_data(request: DecryptRequest):
            try:
                # è§£å¯†æ•°æ®
                decrypted = decrypt_data_sync(request.encrypted_data)
                
                return {
                    "success": True,
                    "data": decrypted["data"]
                }
            except Exception as e:
                raise HTTPException(status_code=500, detail=str(e))
        ```
        
        ### å‰ç«¯JavaScriptä½¿ç”¨
        
        #### 1. åŸºç¡€JavaScript
        
        ```javascript
        // å‰ç«¯åŠ å¯†æœåŠ¡ç±»
        class EncryptionService {
            constructor(baseUrl = '/api/secure') {
                this.baseUrl = baseUrl;
            }
            
            // åŠ å¯†æ•°æ®
            async encryptData(data) {
                try {
                    const response = await fetch(`${this.baseUrl}/encrypt`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ data })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    return result;
                } catch (error) {
                    console.error('åŠ å¯†å¤±è´¥:', error);
                    throw error;
                }
            }
            
            // è§£å¯†æ•°æ®
            async decryptData(encryptedData) {
                try {
                    const response = await fetch(`${this.baseUrl}/decrypt`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ encrypted_data: encryptedData })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    return result;
                } catch (error) {
                    console.error('è§£å¯†å¤±è´¥:', error);
                    throw error;
                }
            }
        }
        
        // ä½¿ç”¨ç¤ºä¾‹
        const encryptionService = new EncryptionService();
        
        // åŠ å¯†ç”¨æˆ·æ•°æ®
        async function encryptUserData() {
            try {
                const userData = {
                    user_id: 123,
                    name: "å¼ ä¸‰",
                    email: "zhangsan@example.com",
                    phone: "13800138000"
                };
                
                const result = await encryptionService.encryptData(userData);
                console.log('åŠ å¯†æˆåŠŸ:', result);
                return result;
            } catch (error) {
                console.error('åŠ å¯†å¤±è´¥:', error);
            }
        }
        
        // è§£å¯†æ•°æ®
        async function decryptUserData(encryptedData) {
            try {
                const result = await encryptionService.decryptData(encryptedData);
                console.log('è§£å¯†æˆåŠŸ:', result.data);
                return result.data;
            } catch (error) {
                console.error('è§£å¯†å¤±è´¥:', error);
            }
        }
        
        // ä½¿ç”¨ç¤ºä¾‹
        encryptUserData().then(encrypted => {
            if (encrypted && encrypted.success) {
                decryptUserData(encrypted.encrypted_data);
            }
        });
        ```
        
        #### 2. React Hook
        
        ```javascript
        // React Hook for åŠ å¯†æœåŠ¡
        import { useState, useCallback } from 'react';
        
        function useEncryption() {
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);
            
            const encryptData = useCallback(async (data) => {
                setIsLoading(true);
                setError(null);
                
                try {
                    const response = await fetch('/api/secure/encrypt', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ data })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    return result;
                } catch (err) {
                    setError(err.message);
                    throw err;
                } finally {
                    setIsLoading(false);
                }
            }, []);
            
            const decryptData = useCallback(async (encryptedData) => {
                setIsLoading(true);
                setError(null);
                
                try {
                    const response = await fetch('/api/secure/decrypt', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ encrypted_data: encryptedData })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const result = await response.json();
                    return result;
                } catch (err) {
                    setError(err.message);
                    throw err;
                } finally {
                    setIsLoading(false);
                }
            }, []);
            
            return { encryptData, decryptData, isLoading, error };
        }
        
        // Reactç»„ä»¶ä½¿ç”¨ç¤ºä¾‹
        function UserProfile() {
            const { encryptData, decryptData, isLoading, error } = useEncryption();
            const [userData, setUserData] = useState(null);
            const [encryptedData, setEncryptedData] = useState(null);
            
            const handleEncrypt = async () => {
                try {
                    const data = {
                        user_id: 123,
                        name: "å¼ ä¸‰",
                        email: "zhangsan@example.com"
                    };
                    
                    const result = await encryptData(data);
                    setEncryptedData(result.encrypted_data);
                    console.log('æ•°æ®å·²åŠ å¯†:', result);
                } catch (err) {
                    console.error('åŠ å¯†å¤±è´¥:', err);
                }
            };
            
            const handleDecrypt = async () => {
                if (!encryptedData) return;
                
                try {
                    const result = await decryptData(encryptedData);
                    setUserData(result.data);
                    console.log('æ•°æ®å·²è§£å¯†:', result.data);
                } catch (err) {
                    console.error('è§£å¯†å¤±è´¥:', err);
                }
            };
            
            return (
                <div>
                    <h2>ç”¨æˆ·æ•°æ®åŠ å¯†æµ‹è¯•</h2>
                    
                    <button onClick={handleEncrypt} disabled={isLoading}>
                        {isLoading ? 'åŠ å¯†ä¸­...' : 'åŠ å¯†æ•°æ®'}
                    </button>
                    
                    <button onClick={handleDecrypt} disabled={isLoading || !encryptedData}>
                        {isLoading ? 'è§£å¯†ä¸­...' : 'è§£å¯†æ•°æ®'}
                    </button>
                    
                    {error && <p style={{color: 'red'}}>é”™è¯¯: {error}</p>}
                    
                    {userData && (
                        <div>
                            <h3>è§£å¯†ç»“æœ:</h3>
                            <pre>{JSON.stringify(userData, null, 2)}</pre>
                        </div>
                    )}
                </div>
            );
        }
        ```
        
        #### 3. Vue.js ç»„åˆå¼API
        
        ```javascript
        // Vue 3 ç»„åˆå¼API
        import { ref, reactive } from 'vue';
        
        export function useEncryption() {
            const isLoading = ref(false);
            const error = ref(null);
            
            const encryptionService = {
                async encryptData(data) {
                    isLoading.value = true;
                    error.value = null;
                    
                    try {
                        const response = await fetch('/api/secure/encrypt', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ data })
                        });
                        
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        
                        const result = await response.json();
                        return result;
                    } catch (err) {
                        error.value = err.message;
                        throw err;
                    } finally {
                        isLoading.value = false;
                    }
                },
                
                async decryptData(encryptedData) {
                    isLoading.value = true;
                    error.value = null;
                    
                    try {
                        const response = await fetch('/api/secure/decrypt', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ encrypted_data: encryptedData })
                        });
                        
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        
                        const result = await response.json();
                        return result;
                    } catch (err) {
                        error.value = err.message;
                        throw err;
                    } finally {
                        isLoading.value = false;
                    }
                }
            };
            
            return {
                encryptionService,
                isLoading,
                error
            };
        }
        
        // Vueç»„ä»¶ä½¿ç”¨ç¤ºä¾‹
        <template>
          <div>
            <h2>æ•°æ®åŠ å¯†æµ‹è¯•</h2>
            
            <button @click="handleEncrypt" :disabled="isLoading">
              {{ isLoading ? 'åŠ å¯†ä¸­...' : 'åŠ å¯†æ•°æ®' }}
            </button>
            
            <button @click="handleDecrypt" :disabled="isLoading || !encryptedData">
              {{ isLoading ? 'è§£å¯†ä¸­...' : 'è§£å¯†æ•°æ®' }}
            </button>
            
            <p v-if="error" style="color: red;">é”™è¯¯: {{ error }}</p>
            
            <div v-if="userData">
              <h3>è§£å¯†ç»“æœ:</h3>
              <pre>{{ JSON.stringify(userData, null, 2) }}</pre>
            </div>
          </div>
        </template>
        
        <script setup>
        import { ref } from 'vue';
        import { useEncryption } from './useEncryption';
        
        const { encryptionService, isLoading, error } = useEncryption();
        const userData = ref(null);
        const encryptedData = ref(null);
        
        const handleEncrypt = async () => {
          try {
            const data = {
              user_id: 123,
              name: "å¼ ä¸‰",
              email: "zhangsan@example.com"
            };
            
            const result = await encryptionService.encryptData(data);
            encryptedData.value = result.encrypted_data;
            console.log('æ•°æ®å·²åŠ å¯†:', result);
          } catch (err) {
            console.error('åŠ å¯†å¤±è´¥:', err);
          }
        };
        
        const handleDecrypt = async () => {
          if (!encryptedData.value) return;
          
          try {
            const result = await encryptionService.decryptData(encryptedData.value);
            userData.value = result.data;
            console.log('æ•°æ®å·²è§£å¯†:', result.data);
          } catch (err) {
            console.error('è§£å¯†å¤±è´¥:', err);
          }
        };
        </script>
        ```
        
        #### 4. TypeScript ç±»å‹å®šä¹‰
        
        ```typescript
        // TypeScript ç±»å‹å®šä¹‰
        interface EncryptRequest {
          data: Record<string, any>;
        }
        
        interface DecryptRequest {
          encrypted_data: Record<string, any>;
        }
        
        interface EncryptResponse {
          success: boolean;
          encrypted_data: Record<string, any>;
          session_id: string;
        }
        
        interface DecryptResponse {
          success: boolean;
          data: Record<string, any>;
        }
        
        // åŠ å¯†æœåŠ¡ç±» (TypeScript)
        class EncryptionService {
          private baseUrl: string;
          
          constructor(baseUrl: string = '/api/secure') {
            this.baseUrl = baseUrl;
          }
          
          async encryptData(data: Record<string, any>): Promise<EncryptResponse> {
            try {
              const response = await fetch(`${this.baseUrl}/encrypt`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ data })
              });
              
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              
              const result: EncryptResponse = await response.json();
              return result;
            } catch (error) {
              console.error('åŠ å¯†å¤±è´¥:', error);
              throw error;
            }
          }
          
          async decryptData(encryptedData: Record<string, any>): Promise<DecryptResponse> {
            try {
              const response = await fetch(`${this.baseUrl}/decrypt`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ encrypted_data: encryptedData })
              });
              
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              
              const result: DecryptResponse = await response.json();
              return result;
            } catch (error) {
              console.error('è§£å¯†å¤±è´¥:', error);
              throw error;
            }
          }
        }
        
        // ä½¿ç”¨ç¤ºä¾‹
        const encryptionService = new EncryptionService();
        
        // åŠ å¯†ç”¨æˆ·æ•°æ®
        const userData = {
          user_id: 123,
          name: "å¼ ä¸‰",
          email: "zhangsan@example.com"
        };
        
        encryptionService.encryptData(userData)
          .then(result => {
            console.log('åŠ å¯†æˆåŠŸ:', result);
            return encryptionService.decryptData(result.encrypted_data);
          })
          .then(result => {
            console.log('è§£å¯†æˆåŠŸ:', result.data);
          })
          .catch(error => {
            console.error('æ“ä½œå¤±è´¥:', error);
          });
        ```
        
        ### ç§»åŠ¨ç«¯ä½¿ç”¨
        
        #### React Native
        
        ```javascript
        // React Native åŠ å¯†æœåŠ¡
        class EncryptionService {
          constructor(baseUrl = 'http://your-api-server.com/api/secure') {
            this.baseUrl = baseUrl;
          }
          
          async encryptData(data) {
            try {
              const response = await fetch(`${this.baseUrl}/encrypt`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ data })
              });
              
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              
              const result = await response.json();
              return result;
            } catch (error) {
              console.error('åŠ å¯†å¤±è´¥:', error);
              throw error;
            }
          }
          
          async decryptData(encryptedData) {
            try {
              const response = await fetch(`${this.baseUrl}/decrypt`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({ encrypted_data: encryptedData })
              });
              
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              
              const result = await response.json();
              return result;
            } catch (error) {
              console.error('è§£å¯†å¤±è´¥:', error);
              throw error;
            }
          }
        }
        
        // ä½¿ç”¨ç¤ºä¾‹
        import React, { useState } from 'react';
        import { View, Text, Button, Alert } from 'react-native';
        
        const encryptionService = new EncryptionService();
        
        export default function App() {
          const [isLoading, setIsLoading] = useState(false);
          
          const handleEncrypt = async () => {
            setIsLoading(true);
            try {
              const userData = {
                user_id: 123,
                name: "å¼ ä¸‰",
                device_id: "mobile_device_001"
              };
              
              const result = await encryptionService.encryptData(userData);
              Alert.alert('æˆåŠŸ', 'æ•°æ®å·²åŠ å¯†');
              console.log('åŠ å¯†ç»“æœ:', result);
            } catch (error) {
              Alert.alert('é”™è¯¯', 'åŠ å¯†å¤±è´¥: ' + error.message);
            } finally {
              setIsLoading(false);
            }
          };
          
          return (
            <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
              <Text>åŠ å¯†æµ‹è¯•</Text>
              <Button 
                title={isLoading ? 'åŠ å¯†ä¸­...' : 'åŠ å¯†æ•°æ®'} 
                onPress={handleEncrypt}
                disabled={isLoading}
              />
            </View>
          );
        }
        ```
        
        ## ğŸ“‹ å‡½æ•°è¯´æ˜
        
        ### åŒæ­¥å‡½æ•°
        
        | å‡½æ•° | è¯´æ˜ | å‚æ•° | è¿”å›å€¼ |
        |------|------|------|--------|
        | `key_exchange_sync(client_id, version=None)` | å¯†é’¥äº¤æ¢ | client_id: å®¢æˆ·ç«¯ID | åŒ…å«session_idçš„å­—å…¸ |
        | `encrypt_data_sync(data, session_id)` | åŠ å¯†æ•°æ® | data: è¦åŠ å¯†çš„æ•°æ® | åŠ å¯†ç»“æœå­—å…¸ |
        | `decrypt_data_sync(encrypted_data)` | è§£å¯†æ•°æ® | encrypted_data: åŠ å¯†æ•°æ® | è§£å¯†ç»“æœå­—å…¸ |
        | `create_session_sync(client_id, version=None)` | åˆ›å»ºä¼šè¯ | client_id: å®¢æˆ·ç«¯ID | ä¼šè¯ä¿¡æ¯å­—å…¸ |
        | `invalidate_session_sync(session_id)` | ä½¿ä¼šè¯å¤±æ•ˆ | session_id: ä¼šè¯ID | æ“ä½œç»“æœå­—å…¸ |
        | `get_session_info_sync(session_id)` | è·å–ä¼šè¯ä¿¡æ¯ | session_id: ä¼šè¯ID | ä¼šè¯ä¿¡æ¯å­—å…¸ |
        | `health_check_sync()` | å¥åº·æ£€æŸ¥ | æ—  | å¥åº·çŠ¶æ€å­—å…¸ |
        
        ### å¼‚æ­¥å‡½æ•°
        
        | å‡½æ•° | è¯´æ˜ | å‚æ•° | è¿”å›å€¼ |
        |------|------|------|--------|
        | `key_exchange(client_id, version=None)` | å¯†é’¥äº¤æ¢ | client_id: å®¢æˆ·ç«¯ID | åŒ…å«session_idçš„å­—å…¸ |
        | `encrypt_data(data, session_id)` | åŠ å¯†æ•°æ® | data: è¦åŠ å¯†çš„æ•°æ® | åŠ å¯†ç»“æœå­—å…¸ |
        | `decrypt_data(encrypted_data)` | è§£å¯†æ•°æ® | encrypted_data: åŠ å¯†æ•°æ® | è§£å¯†ç»“æœå­—å…¸ |
        | `create_session(client_id, version=None)` | åˆ›å»ºä¼šè¯ | client_id: å®¢æˆ·ç«¯ID | ä¼šè¯ä¿¡æ¯å­—å…¸ |
        | `invalidate_session(session_id)` | ä½¿ä¼šè¯å¤±æ•ˆ | session_id: ä¼šè¯ID | æ“ä½œç»“æœå­—å…¸ |
        | `get_session_info(session_id)` | è·å–ä¼šè¯ä¿¡æ¯ | session_id: ä¼šè¯ID | ä¼šè¯ä¿¡æ¯å­—å…¸ |
        | `health_check()` | å¥åº·æ£€æŸ¥ | æ—  | å¥åº·çŠ¶æ€å­—å…¸ |
        
        ## ğŸ”§ é…ç½®é€‰é¡¹
        
        ### SecurityConfig å‚æ•°
        
        | å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
        |------|------|--------|------|
        | `rsa_key_size` | int | 2048 | RSAå¯†é’¥å¤§å° |
        | `aes_key_size` | int | 32 | AESå¯†é’¥å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
        | `aes_mode` | str | "GCM" | AESæ¨¡å¼ï¼ˆGCM/CBCï¼‰ |
        | `session_expire_time` | int | 3600 | ä¼šè¯è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰ |
        | `max_timestamp_diff` | int | 300 | æœ€å¤§æ—¶é—´æˆ³å·®å¼‚ï¼ˆç§’ï¼‰ |
        | `cache_backend` | str | "memory" | ç¼“å­˜åç«¯ï¼ˆmemory/redisï¼‰ |
        | `redis_url` | str | None | Redisè¿æ¥URL |
        | `log_level` | str | "INFO" | æ—¥å¿—çº§åˆ« |
        | `enable_logging` | bool | True | æ˜¯å¦å¯ç”¨æ—¥å¿— |
        
        ### ç¯å¢ƒå˜é‡é…ç½®
        
        ```bash
        export RSA_KEY_SIZE=2048
        export AES_KEY_SIZE=32
        export AES_MODE=GCM
        export SESSION_EXPIRE_TIME=3600
        export MAX_TIMESTAMP_DIFF=300
        export CACHE_BACKEND=memory
        export REDIS_URL=redis://localhost:6379
        export LOG_LEVEL=INFO
        export ENABLE_LOGGING=true
        ```
        
        ## ğŸ” æ ¸å¿ƒåŠŸèƒ½
        
        ### 1. å¯†é’¥äº¤æ¢
        
        ```python
        # å¼‚æ­¥ç‰ˆæœ¬
        result = await key_exchange("client_id", "1.0.0")
        
        # åŒæ­¥ç‰ˆæœ¬
        result = key_exchange_sync("client_id", "1.0.0")
        
        # è¿”å›ç»“æœ
        {
            "success": True,
            "session_id": "client_id_1234567890_abc123",
            "public_key": "-----BEGIN PUBLIC KEY-----...",
            "hmac_key": "base64_encoded_key",
            "server_timestamp": 1234567890
        }
        ```
        
        ### 2. æ•°æ®åŠ å¯†
        
        ```python
        # å¼‚æ­¥ç‰ˆæœ¬
        encrypt_result = await encrypt_data(data, session_id)
        
        # åŒæ­¥ç‰ˆæœ¬
        encrypt_result = encrypt_data_sync(data, session_id)
        
        # è¿”å›ç»“æœ
        {
            "success": True,
            "session_id": "session_id",
            "encrypted_data": "base64_encoded_data",
            "timestamp": "1234567890",
            "nonce": "base64_encoded_nonce",
            "signature": "base64_encoded_signature"
        }
        ```
        
        ### 3. æ•°æ®è§£å¯†
        
        ```python
        # å¼‚æ­¥ç‰ˆæœ¬
        decrypt_result = await decrypt_data(encrypt_result)
        
        # åŒæ­¥ç‰ˆæœ¬
        decrypt_result = decrypt_data_sync(encrypt_result)
        
        # è¿”å›ç»“æœ
        {
            "success": True,
            "data": {"message": "Hello, World!"},
            "session_id": "session_id"
        }
        ```
        
        ### 4. ä¼šè¯ç®¡ç†
        
        ```python
        # è·å–ä¼šè¯ä¿¡æ¯
        session_info = await get_session_info(session_id)
        
        # ä½¿ä¼šè¯å¤±æ•ˆ
        await invalidate_session(session_id)
        
        # å¥åº·æ£€æŸ¥
        health_result = await health_check()
        ```
        
        ## ğŸ”’ å®‰å…¨ç‰¹æ€§
        
        ### 1. æ··åˆåŠ å¯†
        - **RSA**: ç”¨äºå¯†é’¥äº¤æ¢ï¼ŒåŠ å¯†AESå¯†é’¥
        - **AES**: ç”¨äºæ•°æ®åŠ å¯†ï¼Œæ”¯æŒGCMå’ŒCBCæ¨¡å¼
        - **HMAC**: ç”¨äºæ•°æ®å®Œæ•´æ€§éªŒè¯
        
        ### 2. é˜²é‡æ”¾æ”»å‡»
        - æ—¶é—´æˆ³éªŒè¯ï¼ˆ5åˆ†é’Ÿçª—å£ï¼‰
        - éšæœºæ•°ï¼ˆnonceï¼‰æœºåˆ¶
        - ä¼šè¯è¿‡æœŸæœºåˆ¶
        
        ### 3. ä¼šè¯ç®¡ç†
        - åŠ¨æ€ä¼šè¯IDç”Ÿæˆ
        - ä¼šè¯è¿‡æœŸè‡ªåŠ¨æ¸…ç†
        - æ´»åŠ¨æ—¶é—´è·Ÿè¸ª
        
        ### 4. ç¼“å­˜æ”¯æŒ
        - å†…å­˜ç¼“å­˜ï¼ˆé»˜è®¤ï¼‰
        - Redisç¼“å­˜ï¼ˆå¯é€‰ï¼‰
        
        ## ğŸ“Š æ€§èƒ½ç‰¹æ€§
        
        ### 1. å¼‚æ­¥æ”¯æŒ
        - æ‰€æœ‰APIéƒ½æ˜¯å¼‚æ­¥çš„
        - æ”¯æŒé«˜å¹¶å‘å¤„ç†
        
        ### 2. å¯é…ç½®ç®—æ³•
        - RSAå¯†é’¥å¤§å°å¯é…ç½®ï¼ˆ2048/4096ï¼‰
        - AESæ¨¡å¼å¯é…ç½®ï¼ˆGCM/CBCï¼‰
        - HMACç®—æ³•å¯é…ç½®ï¼ˆSHA256/SHA512ï¼‰
        
        ### 3. ç¼“å­˜ä¼˜åŒ–
        - ä¼šè¯ä¿¡æ¯ç¼“å­˜
        - å¯†é’¥ç¼“å­˜
        - è‡ªåŠ¨è¿‡æœŸæ¸…ç†
        
        ## ğŸ”§ é«˜çº§ç”¨æ³•
        
        ### 1. è‡ªå®šä¹‰é…ç½®
        
        ```python
        from encryption_framework import EncryptionAPI, SecurityConfig
        
        config = SecurityConfig(
            rsa_key_size=4096,  # ä½¿ç”¨4096ä½RSA
            aes_mode="CBC",     # ä½¿ç”¨CBCæ¨¡å¼
            session_expire_time=7200,  # 2å°æ—¶è¿‡æœŸ
            cache_backend="redis",     # ä½¿ç”¨Redisç¼“å­˜
            redis_url="redis://localhost:6379"
        )
        
        api = EncryptionAPI(config)
        ```
        
        ### 2. Redisç¼“å­˜
        
        ```python
        # é…ç½®Redisç¼“å­˜
        config = SecurityConfig(
            cache_backend="redis",
            redis_url="redis://localhost:6379"
        )
        
        api = EncryptionAPI(config)
        ```
        
        ### 3. é”™è¯¯å¤„ç†
        
        ```python
        try:
            result = encrypt_data_sync(data, session_id)
            if result["success"]:
                # å¤„ç†æˆåŠŸç»“æœ
                encrypted_data = result["encrypted_data"]
            else:
                # å¤„ç†é”™è¯¯
                error_message = result["error"]
                print(f"åŠ å¯†å¤±è´¥: {error_message}")
        except Exception as e:
            print(f"å‘ç”Ÿå¼‚å¸¸: {e}")
        ```
        
        ## ğŸ“ ä½¿ç”¨ç¤ºä¾‹
        
        ### ç¤ºä¾‹1ï¼šåŸºæœ¬åŠ å¯†è§£å¯†
        
        ```python
        from encryption_framework import key_exchange_sync, encrypt_data_sync, decrypt_data_sync
        
        def encrypt_user_data(user_data):
            """åŠ å¯†ç”¨æˆ·æ•°æ®"""
            # å¯†é’¥äº¤æ¢
            result = key_exchange_sync("user_client")
            if not result["success"]:
                raise Exception("å¯†é’¥äº¤æ¢å¤±è´¥")
            
            session_id = result["session_id"]
            
            # åŠ å¯†æ•°æ®
            encrypted = encrypt_data_sync(user_data, session_id)
            if not encrypted["success"]:
                raise Exception("æ•°æ®åŠ å¯†å¤±è´¥")
            
            return encrypted
        
        def decrypt_user_data(encrypted_data):
            """è§£å¯†ç”¨æˆ·æ•°æ®"""
            decrypted = decrypt_data_sync(encrypted_data)
            if not decrypted["success"]:
                raise Exception("æ•°æ®è§£å¯†å¤±è´¥")
            
            return decrypted["data"]
        
        # ä½¿ç”¨ç¤ºä¾‹
        user_data = {"user_id": 123, "name": "å¼ ä¸‰", "email": "zhangsan@example.com"}
        encrypted = encrypt_user_data(user_data)
        decrypted = decrypt_user_data(encrypted)
        print(decrypted)  # è¾“å‡ºåŸå§‹æ•°æ®
        ```
        
        ### ç¤ºä¾‹2ï¼šåœ¨Webåº”ç”¨ä¸­ä½¿ç”¨
        
        ```python
        from flask import Flask, request, jsonify
        from encryption_framework import key_exchange_sync, encrypt_data_sync, decrypt_data_sync
        
        app = Flask(__name__)
        
        @app.route('/api/encrypt', methods=['POST'])
        def encrypt_endpoint():
            try:
                data = request.json
                
                # å¯†é’¥äº¤æ¢
                result = key_exchange_sync("web_client")
                session_id = result["session_id"]
                
                # åŠ å¯†æ•°æ®
                encrypted = encrypt_data_sync(data, session_id)
                
                return jsonify({
                    "success": True,
                    "encrypted_data": encrypted,
                    "session_id": session_id
                })
            except Exception as e:
                return jsonify({"success": False, "error": str(e)})
        
        @app.route('/api/decrypt', methods=['POST'])
        def decrypt_endpoint():
            try:
                encrypted_data = request.json.get("encrypted_data")
                
                # è§£å¯†æ•°æ®
                decrypted = decrypt_data_sync(encrypted_data)
                
                return jsonify({
                    "success": True,
                    "data": decrypted["data"]
                })
            except Exception as e:
                return jsonify({"success": False, "error": str(e)})
        
        if __name__ == '__main__':
            app.run(debug=True)
        ```
        
        ### ç¤ºä¾‹3ï¼šåœ¨FastAPIä¸­ä½¿ç”¨
        
        ```python
        from fastapi import FastAPI, HTTPException
        from pydantic import BaseModel
        from encryption_framework import key_exchange_sync, encrypt_data_sync, decrypt_data_sync
        
        app = FastAPI()
        
        class EncryptRequest(BaseModel):
            data: dict
        
        class DecryptRequest(BaseModel):
            encrypted_data: dict
        
        @app.post("/api/encrypt")
        async def encrypt_data(request: EncryptRequest):
            try:
                # å¯†é’¥äº¤æ¢
                result = key_exchange_sync("fastapi_client")
                session_id = result["session_id"]
                
                # åŠ å¯†æ•°æ®
                encrypted = encrypt_data_sync(request.data, session_id)
                
                return {
                    "success": True,
                    "encrypted_data": encrypted,
                    "session_id": session_id
                }
            except Exception as e:
                raise HTTPException(status_code=500, detail=str(e))
        
        @app.post("/api/decrypt")
        async def decrypt_data(request: DecryptRequest):
            try:
                # è§£å¯†æ•°æ®
                decrypted = decrypt_data_sync(request.encrypted_data)
                
                return {
                    "success": True,
                    "data": decrypted["data"]
                }
            except Exception as e:
                raise HTTPException(status_code=500, detail=str(e))
        ```
        
        ## ğŸ“ æ³¨æ„äº‹é¡¹
        
        1. **ä¾èµ–è¦æ±‚**: éœ€è¦å®‰è£… `cryptography` åº“
        2. **Pythonç‰ˆæœ¬**: æ”¯æŒPython 3.8+
        3. **å¼‚æ­¥æ”¯æŒ**: æ‰€æœ‰APIéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ä½¿ç”¨ `async/await`
        4. **ä¼šè¯ç®¡ç†**: ä¼šè¯ä¼šè‡ªåŠ¨è¿‡æœŸï¼Œéœ€è¦å®šæœŸåˆ·æ–°
        5. **å¯†é’¥å®‰å…¨**: ç§é’¥å­˜å‚¨åœ¨ç¼“å­˜ä¸­ï¼Œç¡®ä¿ç¼“å­˜å®‰å…¨
        
        ## ğŸ› æ•…éšœæ’é™¤
        
        ### å¸¸è§é—®é¢˜
        
        1. **ImportError: No module named 'cryptography'**
           ```bash
           pip install cryptography
           ```
        
        2. **Redisè¿æ¥å¤±è´¥**
           - æ£€æŸ¥RedisæœåŠ¡æ˜¯å¦è¿è¡Œ
           - éªŒè¯Redisè¿æ¥URL
           - æˆ–è€…ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼š`cache_backend="memory"`
        
        3. **ä¼šè¯è¿‡æœŸ**
           - å¢åŠ  `session_expire_time` å€¼
           - å®šæœŸè°ƒç”¨ `key_exchange` åˆ·æ–°ä¼šè¯
        
        4. **æ—¶é—´æˆ³éªŒè¯å¤±è´¥**
           - æ£€æŸ¥ç³»ç»Ÿæ—¶é—´æ˜¯å¦åŒæ­¥
           - å¢åŠ  `max_timestamp_diff` å€¼
        
        5. **å‰ç«¯è·¨åŸŸé—®é¢˜**
           ```python
           # åç«¯æ·»åŠ CORSæ”¯æŒ
           from fastapi.middleware.cors import CORSMiddleware
           
           app.add_middleware(
               CORSMiddleware,
               allow_origins=["*"],  # ç”Ÿäº§ç¯å¢ƒè¯·è®¾ç½®å…·ä½“åŸŸå
               allow_credentials=True,
               allow_methods=["*"],
               allow_headers=["*"],
           )
           ```
        
        ## ğŸ”§ è¿è¡Œç¤ºä¾‹
        
        ```bash
        # è¿è¡Œä½¿ç”¨ç¤ºä¾‹
        python encryption_framework/example_usage.py
        ```
        
        ## ğŸ“ æŠ€æœ¯æ”¯æŒ1900098962@qq.com
        
        å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
        
        1. æ˜¯å¦æ­£ç¡®å®‰è£…äº† `cryptography` åº“
        2. æ˜¯å¦æ­£ç¡®å¤åˆ¶äº†æ¡†æ¶æ–‡ä»¶
        3. æ˜¯å¦æ­£ç¡®å¯¼å…¥äº†å‡½æ•°
        4. ç³»ç»Ÿæ—¶é—´æ˜¯å¦åŒæ­¥
        5. æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç³»ç»Ÿèµ„æº
        6. å‰ç«¯APIåœ°å€æ˜¯å¦æ­£ç¡®
        7. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
        
        ## ğŸ“„ è®¸å¯è¯
        
        æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
        
        ## ğŸ¤ è´¡çŒ®
        
        æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼
        
        ---
        
        **ç‰ˆæœ¬**: 1.0.0  
        **æœ€åæ›´æ–°**: 2025å¹´8æœˆ1æ—¥  
        **ä½œè€…**: å¤äº‘é¾™  
        **è®¸å¯è¯**: MIT License
Keywords: encryption,cryptography,rsa,aes,hmac,security,hybrid
Platform: UNKNOWN
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Security :: Cryptography
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.8
Description-Content-Type: text/markdown
