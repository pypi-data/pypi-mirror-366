Metadata-Version: 2.3
Name: qnshare
Version: 0.1.0
Summary: ä¸ƒç‰›äº‘æ–‡ä»¶å…±äº«å·¥å…· - ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ä¸ƒç‰›äº‘å­˜å‚¨å‘½ä»¤è¡Œå·¥å…·
Keywords: qiniu,cloud,storage,file-sharing,cli
Author: wmymz
Author-email: wmymz <wmymz@icloud.com>
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Internet :: File Transfer Protocol (FTP)
Classifier: Topic :: System :: Archiving
Classifier: Topic :: Utilities
Requires-Dist: qiniu>=7.17.0
Requires-Dist: click>=8.0.0
Requires-Python: >=3.8
Project-URL: Homepage, https://github.com/qy527145/qnshare
Project-URL: Issues, https://github.com/qy527145/qnshare/issues
Project-URL: Repository, https://github.com/qy527145/qnshare
Description-Content-Type: text/markdown

# QnShare - ä¸ƒç‰›äº‘æ–‡ä»¶å…±äº«å·¥å…·

ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ä¸ƒç‰›äº‘å­˜å‚¨å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ç‰¹æ€§

- ğŸš€ ç°ä»£åŒ–çš„å‘½ä»¤è¡Œç•Œé¢
- ğŸ”’ å®‰å…¨çš„é…ç½®ç®¡ç†ï¼ˆé…ç½®æ–‡ä»¶å­˜å‚¨åœ¨ç”¨æˆ·ç›®å½•ï¼‰
- ğŸ“ æ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ç­‰æ“ä½œ
- ğŸŒ æ”¯æŒç¦»çº¿ä¸‹è½½ç½‘ç»œæ–‡ä»¶
- ğŸ”„ æ”¯æŒCDNåˆ·æ–°
- ğŸ”— æ”¯æŒç”Ÿæˆä¸‹è½½é“¾æ¥å’Œé˜²ç›—é“¾
- ğŸ“¦ å¯ä½œä¸ºuv toolå®‰è£…

## å®‰è£…

### ä½¿ç”¨ uvï¼ˆæ¨èï¼‰

```bash
# ä½œä¸ºå·¥å…·å®‰è£…
uv tool install qnshare

# æˆ–è€…ä»æœ¬åœ°å®‰è£…
uv tool install .
```

### ä½¿ç”¨ pip

```bash
pip install qnshare
```

## å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–é…ç½®

é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½®ä¸ƒç‰›äº‘çš„Access Keyå’ŒSecret Keyï¼š

```bash
qnshare init
```

æŒ‰æç¤ºè¾“å…¥æ‚¨çš„ä¸ƒç‰›äº‘å¯†é’¥ä¿¡æ¯ã€‚é…ç½®æ–‡ä»¶å°†å®‰å…¨åœ°å­˜å‚¨åœ¨ `~/.qn/config.json`ã€‚

### 2. åŸºæœ¬ä½¿ç”¨

```bash
# åˆ—å‡ºäº‘ç«¯æ–‡ä»¶
qnshare list

# ä¸Šä¼ æ–‡ä»¶
qnshare upload file1.txt file2.jpg

# ä¸‹è½½æ–‡ä»¶
qnshare download file1.txt

# ç¦»çº¿ä¸‹è½½ç½‘ç»œæ–‡ä»¶
qnshare fetch https://example.com/file.zip

# åˆ é™¤æ–‡ä»¶
qnshare delete file1.txt

# åˆ·æ–°CDN
qnshare refresh file1.txt

# è·å–ä¸‹è½½é“¾æ¥
qnshare link file1.txt

# è·å–é˜²ç›—é“¾ï¼ˆå¸¦æ—¶é—´æˆ³ï¼Œä¼šè‡ªåŠ¨ç”ŸæˆåŠ å¯†å¯†é’¥ï¼‰
qnshare link file1.txt --timestamp

# æ‰‹åŠ¨è®¾ç½®é˜²ç›—é“¾åŠ å¯†å¯†é’¥ï¼ˆå¯é€‰ï¼‰
qnshare config --set-encrypt-key

# é‡æ–°ç”ŸæˆéšæœºåŠ å¯†å¯†é’¥ï¼ˆå¯é€‰ï¼‰
qnshare config --generate-encrypt-key

# é…ç½®å­˜å‚¨ç©ºé—´å’ŒåŸŸåï¼ˆå¯é€‰ï¼‰
qnshare config --list-buckets           # åˆ—å‡ºå¯ç”¨å­˜å‚¨ç©ºé—´
qnshare config --set-bucket my-bucket   # è®¾ç½®å­˜å‚¨ç©ºé—´
qnshare config --list-domains my-bucket # åˆ—å‡ºåŸŸå
qnshare config --set-domain my.domain.com # è®¾ç½®åŸŸå

# å¯åŠ¨äº¤äº’å¼æ¨¡å¼ï¼ˆç±»ä¼¼åŸç‰ˆä½“éªŒï¼‰
qnshare interactive
# æˆ–ä½¿ç”¨ç®€å†™
qnshare -i
```

## å‘½ä»¤è¯¦è§£

### `qnshare init`
åˆå§‹åŒ–é…ç½®ï¼Œè®¾ç½®ä¸ƒç‰›äº‘çš„Access Keyã€Secret Keyç­‰ä¿¡æ¯ã€‚

### `qnshare config [OPTIONS]`
æ˜¾ç¤ºæˆ–ä¿®æ”¹å½“å‰é…ç½®ï¼ˆæ•æ„Ÿä¿¡æ¯ä¼šè¢«éšè—ï¼‰ã€‚

é€‰é¡¹ï¼š
- `--set-encrypt-key`: è®¾ç½®é˜²ç›—é“¾åŠ å¯†å¯†é’¥
- `--generate-encrypt-key`: ç”Ÿæˆæ–°çš„éšæœºåŠ å¯†å¯†é’¥
- `--set-bucket <name>`: è®¾ç½®å­˜å‚¨ç©ºé—´åç§°
- `--set-domain <domain>`: è®¾ç½®ç»‘å®šåŸŸå
- `--list-buckets`: åˆ—å‡ºå¯ç”¨çš„å­˜å‚¨ç©ºé—´
- `--list-domains <bucket>`: åˆ—å‡ºæŒ‡å®šå­˜å‚¨ç©ºé—´çš„ç»‘å®šåŸŸå

### `qnshare list [--prefix PREFIX]`
åˆ—å‡ºäº‘ç«¯æ–‡ä»¶ï¼Œå¯é€‰æ‹©æŒ‡å®šå‰ç¼€è¿‡æ»¤ã€‚

### `qnshare upload FILES... [--delete-after DAYS]`
ä¸Šä¼ ä¸€ä¸ªæˆ–å¤šä¸ªæœ¬åœ°æ–‡ä»¶ï¼Œå¯è®¾ç½®è‡ªåŠ¨åˆ é™¤æ—¶é—´ã€‚

### `qnshare download FILENAME [--output OUTPUT]`
ä¸‹è½½äº‘ç«¯æ–‡ä»¶åˆ°æœ¬åœ°ï¼Œå¯æŒ‡å®šè¾“å‡ºæ–‡ä»¶åã€‚

### `qnshare fetch URL [--name NAME] [--delete-after DAYS] [--no-download]`
ç¦»çº¿ä¸‹è½½ç½‘ç»œæ–‡ä»¶åˆ°äº‘ç«¯ï¼Œé»˜è®¤åŒæ—¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚

### `qnshare delete FILENAME`
åˆ é™¤äº‘ç«¯æ–‡ä»¶ï¼ˆéœ€è¦ç¡®è®¤ï¼‰ã€‚

### `qnshare refresh FILENAME`
åˆ·æ–°æ–‡ä»¶çš„CDNç¼“å­˜ã€‚

### `qnshare link FILENAME [--timestamp]`
è·å–æ–‡ä»¶ä¸‹è½½é“¾æ¥ï¼Œå¯é€‰æ‹©ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„é˜²ç›—é“¾ã€‚

### `qnshare interactive` æˆ– `qnshare -i`
å¯åŠ¨äº¤äº’å¼æ¨¡å¼ï¼Œæä¾›ç±»ä¼¼åŸç‰ˆqn.pyçš„å‘½ä»¤è¡Œä½“éªŒã€‚

åœ¨äº¤äº’å¼æ¨¡å¼ä¸­å¯ç”¨çš„å‘½ä»¤ï¼š
- `l` æˆ– `list` - åˆ—å‡ºæ–‡ä»¶
- `p` æˆ– `upload` - ä¸Šä¼ æ–‡ä»¶ï¼ˆæ”¯æŒæ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†ï¼‰
- `g <filename>` æˆ– `download <filename>` - ä¸‹è½½æ–‡ä»¶
- `s <url>` æˆ– `fetch <url>` - ç¦»çº¿ä¸‹è½½
- `d <filename>` æˆ– `delete <filename>` - åˆ é™¤æ–‡ä»¶
- `r <filename>` æˆ– `refresh <filename>` - åˆ·æ–°CDN
- `link <filename>` - è·å–æ–‡ä»¶é“¾æ¥
- `config` - æ˜¾ç¤ºé…ç½®ä¿¡æ¯
- `help` - æ˜¾ç¤ºå¸®åŠ©
- `exit` æˆ– `q` - é€€å‡º

## é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äº `~/.qn/config.json`ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "access_key": "your_access_key",
  "secret_key": "your_secret_key",
  "encrypt_key": "your_encrypt_key",
  "prefix": "share/",
  "dead_time": 3600,
  "bucket_name": null,
  "domain": null
}
```

- `access_key`: ä¸ƒç‰›äº‘Access Keyï¼ˆå¿…éœ€ï¼‰
- `secret_key`: ä¸ƒç‰›äº‘Secret Keyï¼ˆå¿…éœ€ï¼‰
- `encrypt_key`: é˜²ç›—é“¾åŠ å¯†å¯†é’¥ï¼ˆå¯é€‰ï¼Œç•™ç©ºæ—¶ä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨ç”Ÿæˆï¼‰
- `prefix`: æ–‡ä»¶å‰ç¼€ï¼Œé»˜è®¤ä¸º "share/"
- `dead_time`: é˜²ç›—é“¾æœ‰æ•ˆæœŸï¼ˆç§’ï¼‰ï¼Œé»˜è®¤3600ç§’
- `bucket_name`: å­˜å‚¨ç©ºé—´åç§°ï¼ˆå¯æ‰‹åŠ¨è®¾ç½®ï¼Œç•™ç©ºåˆ™è‡ªåŠ¨è·å–ç¬¬ä¸€ä¸ªï¼‰
- `domain`: ç»‘å®šåŸŸåï¼ˆå¯æ‰‹åŠ¨è®¾ç½®ï¼Œç•™ç©ºåˆ™è‡ªåŠ¨è·å–ç¬¬ä¸€ä¸ªï¼‰

## ç¼–ç¨‹æ¥å£

é™¤äº†å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨Pythonä»£ç ä¸­ä½¿ç”¨ï¼š

```python
from qnshare import QiniuClient, init_config

# åˆå§‹åŒ–é…ç½®ï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰
init_config(
    access_key="your_access_key",
    secret_key="your_secret_key"
)

# åˆ›å»ºå®¢æˆ·ç«¯
client = QiniuClient()

# ä¸Šä¼ æ–‡ä»¶
remote_name = client.upload_local_file("local_file.txt")

# è·å–ä¸‹è½½é“¾æ¥
download_url = client.get_download_link(remote_name)

# åˆ—å‡ºæ–‡ä»¶
files = client.get_file_list()
```

## è¿ç§»æŒ‡å—

å¦‚æœæ‚¨ä¹‹å‰ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬çš„qn.pyï¼Œè¯·æ³¨æ„ï¼š

1. **é…ç½®æ–¹å¼å˜æ›´**ï¼šä¸å†ä½¿ç”¨ç¡¬ç¼–ç çš„å¯†é’¥ï¼Œéœ€è¦è¿è¡Œ `qnshare init` è¿›è¡Œé…ç½®
2. **å‘½ä»¤è¡Œç•Œé¢**ï¼šæ–°çš„CLIå‘½ä»¤æ›¿ä»£äº†åŸæœ‰çš„äº¤äº’å¼shell
3. **APIå˜æ›´**ï¼šå»ºè®®ä½¿ç”¨æ–°çš„ `QiniuClient` ç±»æ›¿ä»£æ—§çš„ `Qiniu` ç±»

æ—§çš„æ¥å£ä»ç„¶å¯ç”¨ä½†å·²æ ‡è®°ä¸ºå¼ƒç”¨ï¼Œå»ºè®®å°½å¿«è¿ç§»åˆ°æ–°æ¥å£ã€‚

## å®‰å…¨æ³¨æ„äº‹é¡¹

- é…ç½®æ–‡ä»¶ä¼šè‡ªåŠ¨è®¾ç½®é€‚å½“çš„æƒé™ï¼ˆä»…ç”¨æˆ·å¯è¯»å†™ï¼‰
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥ä¿¡æ¯
- å®šæœŸæ£€æŸ¥å’Œæ›´æ–°æ‚¨çš„ä¸ƒç‰›äº‘å¯†é’¥

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼