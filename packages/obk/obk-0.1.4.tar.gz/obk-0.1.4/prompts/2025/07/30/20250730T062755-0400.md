<?xml version="1.0" encoding="UTF-8"?>
<gsl-prompt id="20250730T062755-0400">
<gsl-description>

<!--
This is a self-contained prompt and spec for OBK/Codex agent work.
- Inputs, outputs, workflows, and tests are listed below.
- All document rules and agent policies are defined in the "Document Specification" section.
- Agents may only update workflows and add new tests (see rules).
- Everything else is for maintainers to edit as needed.
- This file should be easy to read and quick to update—no hidden steps or dependencies.
-->
</gsl-description>
<gsl-header>

# Add Classes

</gsl-header>
<gsl-block>

<gsl-purpose>

## 1.  Purpose

Implement classes in my Python project.   </gsl-purpose>

<gsl-inputs>

## 2. Inputs

This table lists key artifacts—tools, articles, or other sources—that directly guide or constrain the OBK scaffold. Each input is chosen because it meaningfully shapes project automation, agent workflows, or architecture.

| Input | Notes |
| --- | --- |
| ChatGPT / Codex | Tool |
| **Why One-Line Manual Tests Should Precede Automation** | Article |
| **Refactoring Your Python CLI: From Functions to Classes** | Article |
| **Task Template for Codex Agents** | Article |
| **Prompt Template for Codex Agents** | Article |


</gsl-inputs>

<gsl-outputs>

## 3. Outputs

This section lists the main components produced by the OBK scaffold. Each is a concrete result needed to build, run, or review the OBK CLI project.

* Implemented service classes `Greeter` and `Divider` along with the main `ObkCLI` class to manage command dispatching and error handling.
* Documented several manual test scenarios in the project prompt, covering:

  * hello-world
  * divide operations
  * custom log files
  * divide-by-zero
  * the fail command

* ##### Testing

    * ✅ `pytest -q`


</gsl-outputs>

<gsl-workflows>

## 4. Workflows


This section lists the main steps or processes required to complete tasks in the project.



#### 1. Define a Class

Use the `class` keyword:

```python
class Greeter:
    """Simple greeter service."""
    ...
```



#### 2. Initialize Attributes (`__init__`)

Add an initializer to set up instance state:

```python
class ObkCLI:
    def __init__(self, log_file: Path = LOG_FILE) -> None:
        self.log_file = log_file
        self.greeter = Greeter()
        self.divider = Divider()
```



#### 3. Add Methods

Define behaviors with `def`:

```python
class Greeter:
    def hello(self) -> str:
        return "hello world"
```



#### 4. Use Properties (Optional)

For computed attributes, use `@property`:

```python
class Example:
    def __init__(self, value):
        self._value = value

    @property
    def double(self):
        return self._value * 2
```



#### 5. Instantiate the Class

Create objects by calling the class:

```python
cli = ObkCLI()
cli.run(["hello-world"])
```



#### 6. Access Modifiers

Python doesn’t enforce public/private keywords. Instead:

* A single leading underscore (`_name`) signals “internal use.”
* A double underscore (`__name`) invokes name mangling for stronger privacy.



#### 7. Inheritance

Derive one class from another:

```python
class ObkError(Exception):
    """Base error for the obk CLI."""

class DivisionByZeroError(ObkError):
    """Raised when attempting to divide by zero."""
```



#### 8. Abstract Classes and Interfaces

Use `abc.ABC` and `@abstractmethod` to define required methods:

```python
from abc import ABC, abstractmethod

class Processor(ABC):
    @abstractmethod
    def process(self, data):
        pass
```

Subclasses must implement `process`. This doubles as an “interface” in Python.



#### 9. Polymorphism

Polymorphism arises when different classes provide the same method interface. The CLI’s error classes inherit from `ObkError` and can be caught together:

```python
try:
    ...
except ObkError as exc:
    handle_error(exc)
```

Or, more generally, any object with the expected method (duck typing) can be used in place of another:

```python
class Divider:
    def divide(self, a: float, b: float) -> float:
        ...
```

Any class that defines a `divide()` method with the same semantics can substitute for `Divider`.



This approach—defining classes, initializing their state, adding methods/properties, optionally using inheritance or abstract base classes—allows you to build extensible, testable components as shown in `src/obk/cli.py`.


</gsl-workflows>

<gsl-tdd>
<gsl-description>

## 5. Tests

Add single-line manual tests here. Each test should fully validate a required feature or edge case, and must be wrapped in a `<gsl-test>` element.
</gsl-description>
<gsl-test id="T1">

- T1: run `pytest -q`
</gsl-test>

<gsl-test id="T2">

- Run `python -m obk hello-world` prints "hello world".
</gsl-test>

<gsl-test id="T3">

- `python -m obk divide 4 2` outputs `2.0` and writes to log.
</gsl-test>

<gsl-test id="T4">

- `python -m obk divide 1 0` returns code 2 and shows an error.
</gsl-test>

<gsl-test id="T5">

- `python -m obk --logfile custom.log divide 4 2` creates `custom.log`.
</gsl-test>

<gsl-test id="T6">

- `python -m obk fail` exits with code 1 and prints fatal message.
</gsl-test>

</gsl-tdd>
<gsl-document-spec>

## 6. Document Specification

#### Overview

This section defines the rules and conventions for maintaining and updating this prompt document.

This specification applies only to this prompt document.

#### S-1. Identifier and Numbering

Major sections and tests in this document must use a clear, hierarchical ID. Use an uppercase prefix and numbers, like `T1`, `T2.1`, or `S1.2.3`:

- Use `T` for tests in `<gsl-tdd>` (e.g., `T1`, `T2.1`).
- Use `S` for specification items if needed (e.g., `S1`, `S2.1`).
- Number all items in order, with no gaps or repeats.
- Do not remove or change IDs except to fix errors.

These IDs are required for referencing, tracking, and audits.


#### S-2. Update Policy

These rules apply to automated changes by agents. Manual edits by maintainers can update any section.

- Agents **may only** update these sections:
  - `<gsl-workflows>` (agents may add, change, or remove any part)
  - `<gsl-tdd>` (agents may add new `<gsl-test>` elements, but may not change or remove any existing `<gsl-test>`)

- Agents **must not** change or remove any other content in this document.

These rules protect the integrity of the document and its tests, while allowing agents to add workflows and new tests.


#### S-3. Tests Section

- `<gsl-tdd>` holds one or more `<gsl-test>` elements.
- Each `<gsl-test>` must start with a single-line description and have a unique `id` (e.g., `T1`, `T2`, etc).
- You may add a code block (with triple backticks) below the test description if needed.
- Agents may only add new `<gsl-test>` elements. They must not change or remove any existing test.
- Only maintainers can change or remove tests.
- Use these tests for auditing and validation.


</gsl-document-spec>
</gsl-block>
</gsl-prompt>

