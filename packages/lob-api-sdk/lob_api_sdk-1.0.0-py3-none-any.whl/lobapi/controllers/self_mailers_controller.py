# -*- coding: utf-8 -*-

"""
lobapi

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

from lobapi.api_helper import APIHelper
from lobapi.configuration import Server
from lobapi.controllers.base_controller import BaseController
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter
from lobapi.http.http_method_enum import HttpMethodEnum
from apimatic_core.authentication.multiple.single_auth import Single
from lobapi.models.returns_a_self_mailer_object import ReturnsASelfMailerObject
from lobapi.models.a_dictionary_with_a_data_property_that_contains_an_array_of_up_to_limit_self_mailers_each_entry_in_the_array_is_a_separate_self_mailer_the_previous_and_next_page_of_self_mailers_can_be_retrieved_by_calling_the_endpoint_contained_in_the_previous_url import ADictionaryWithADataPropertyThatContainsAnArrayOfUpToLimitSelfMailersEachEntryInTheArrayIsASeparateSelfMailerThePreviousAndNextPageOfSelfMailersCanBeRetrievedByCallingTheEndpointContainedInThePreviousUrl
from lobapi.models.returns_true_if_the_delete_was_successful import ReturnsTrueIfTheDeleteWasSuccessful
from lobapi.exceptions.error_exception import ErrorException


class SelfMailersController(BaseController):

    """A Controller to access Endpoints in the lobapi API."""
    def __init__(self, config):
        super(SelfMailersController, self).__init__(config)

    def creates_a_new_self_mailer_object(self,
                                         idempotency_key,
                                         description,
                                         to,
                                         inside,
                                         outside):
        """Does a POST request to /self_mailers.

        Creates a new self_mailer given information

        Args:
            idempotency_key (str): A string of no longer than 256 characters
                that uniquely identifies this resource. For more help
                integrating idempotency keys, refer to our [implementation
                guide](https://www.lob.com/guides#idempotent_request).
            description (str): (optional) An internal description that
                identifies this resource. Must be no longer than 255
                characters.
            to (str): (required) Must either be an address ID or an inline
                object with correct address parameters. If an object is used,
                an address will be created, corrected, and standardized for
                free whenever possible using our US Address Verification
                engine (if it is a US address), and returned back with an ID.
                Depending on your Print & Mail Edition, US addresses may also
                be run additionally through National Change of Address (NCOA).
                Non-US addresses will be standardized into uppercase only. If
                a US address used does not meet your accountâ€™s US Mail
                Strictness Setting, the request will fail. Read more here.
            inside (str): (required) The artwork to use as the inside of your
                self mailer. Accepts an HTML string of under 10,000
                characters, the ID of a saved HTML template, or a remote URL
                or a local upload of an HTML, PDF, PNG, or JPG file. Remote
                URLs have a 20 MB file size limit and must be downloaded
                within 40 seconds. HTML files passed as remote URLs or local
                file uploads have no character limit. HTML merge variables
                should not include delimiting whitespace. PDF, PNG, and JPGs
                must be sized at 6"x18" at 300 DPI, while supplied HTML will
                be rendered to the specified size. Be sure to leave room for
                address and postage information by following the templates
                provided here: 6x18 bifold template, 12x9 bifold template. See
                here for HTML examples.
            outside (str): (required) The artwork to use as the outside of
                your self mailer. Accepts an HTML string of under 10,000
                characters, the ID of a saved HTML template, or a remote URL
                or a local upload of an HTML, PDF, PNG, or JPG file. Remote
                URLs have a 20 MB file size limit and must be downloaded
                within 40 seconds. HTML files passed as remote URLs or local
                file uploads have no character limit. HTML merge variables
                should not include delimiting whitespace. PDF, PNG, and JPGs
                must be sized at 6"x18" at 300 DPI, while supplied HTML will
                be rendered to the specified size. See here for HTML examples.

        Returns:
            ReturnsASelfMailerObject: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_1)
            .path('/self_mailers')
            .http_method(HttpMethodEnum.POST)
            .header_param(Parameter()
                          .key('Idempotency-Key')
                          .value(idempotency_key))
            .form_param(Parameter()
                        .key('description')
                        .value(description))
            .form_param(Parameter()
                        .key('to')
                        .value(to))
            .form_param(Parameter()
                        .key('inside')
                        .value(inside))
            .form_param(Parameter()
                        .key('outside')
                        .value(outside))
            .header_param(Parameter()
                          .key('content-type')
                          .value('application/x-www-form-urlencoded'))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(ReturnsASelfMailerObject.from_dictionary)
            .local_error('500', 'Internal Server Error', ErrorException)
        ).execute()

    def list_all_self_mailers(self):
        """Does a GET request to /self_mailers.

        Returns a list of your self_mailers. The self_mailers are returned
        sorted by creation date, with the most recently created self_mailers
        appearing first.

        Returns:
            ADictionaryWithADataPropertyThatContainsAnArrayOfUpToLimitSelfMaile
                rsEachEntryInTheArrayIsASeparateSelfMailerThePreviousAndNextPag
                eOfSelfMailersCanBeRetrievedByCallingTheEndpointContainedInTheP
                reviousUrl: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_1)
            .path('/self_mailers')
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(ADictionaryWithADataPropertyThatContainsAnArrayOfUpToLimitSelfMailersEachEntryInTheArrayIsASeparateSelfMailerThePreviousAndNextPageOfSelfMailersCanBeRetrievedByCallingTheEndpointContainedInThePreviousUrl.from_dictionary)
            .local_error('500', 'Internal Server Error', ErrorException)
        ).execute()

    def retrieve_self_mailer_with_given_id(self,
                                           sfm_id):
        """Does a GET request to /self_mailers/{sfm_id}.

        Retrieves the details of an existing self_mailer. You need only supply
        the unique self_mailer identifier that was returned upon self_mailer
        creation.

        Args:
            sfm_id (str): (Required) id of the self_mailer

        Returns:
            ReturnsASelfMailerObject: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_1)
            .path('/self_mailers/{sfm_id}')
            .http_method(HttpMethodEnum.GET)
            .template_param(Parameter()
                            .key('sfm_id')
                            .value(sfm_id)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(ReturnsASelfMailerObject.from_dictionary)
            .local_error('500', 'Internal Server Error', ErrorException)
        ).execute()

    def deletes_self_mailer_with_given_id(self,
                                          sfm_id):
        """Does a DELETE request to /self_mailers/{sfm_id}.

        Completely removes a self mailer from production. This can only be
        done if the self mailer's `send_date` has not yet passed. If the self
        mailer is successfully canceled, you will not be charged for it. This
        feature is exclusive to certain customers. Upgrade to the appropriate
        [Print & Mail Edition](https://dashboard.lob.com/#/settings/editions)
        to gain access.

        Args:
            sfm_id (str): (Required) id of the self_mailer

        Returns:
            ReturnsTrueIfTheDeleteWasSuccessful: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_1)
            .path('/self_mailers/{sfm_id}')
            .http_method(HttpMethodEnum.DELETE)
            .template_param(Parameter()
                            .key('sfm_id')
                            .value(sfm_id)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(ReturnsTrueIfTheDeleteWasSuccessful.from_dictionary)
            .local_error('500', 'Internal Server Error', ErrorException)
        ).execute()
