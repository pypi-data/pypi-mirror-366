import{bN as qt,_ as J,bO as Wt,y as M,m as V,w as ae,x as N,b,B as Oe,C as Je,bP as ze,M as Me,v as se,a as S,I as Kt,d as Y,r as X,bQ as Ut,g as K,p as B,e as Q,aC as oe,aD as Xt,aA as Yt,bp as pe,aU as fe,f as ve,bf as Qt,c as _,b7 as ie,t as I,u as ee,n as et,aB as Zt,K as Jt,L as j,b9 as qe,aX as We,aV as $e,bR as tt,b8 as Fe,i as le,aW as ne,bS as ea,h as A,bj as ta,bT as aa,bU as la,bE as Re,bG as at,bV as me,bW as ue,F as Z,bs as Le,z as Ke,bX as Ae,ab as de,bY as ce,bZ as lt,o as na,W as ra,A as nt,a6 as sa,b_ as oa,q as Ue}from"./main-CsIaH2hD.js";import{V as z,A as ia,d as ua,F as da,j as ca,t as fa,e as va,v as ma,D as ga,c as ba,L as ha,H as ya,k as Xe}from"./forwardRefs-Db-DHQ6i.js";import{S as pa,V as xa}from"./VForm-CcXJFESw.js";import{useAdminStore as rt}from"./admin-wyH_PbhI.js";import{V as Sa}from"./VDialog-BZfGlJmk.js";import{d as st,c as Ne,g as wa,h as Pa,i as ka}from"./VSelect-CqfOd_B-.js";import{V as Ge}from"./VCheckboxBtn-D7hmUym5.js";import{m as _a,V as ge}from"./VTable-BDAERYQ5.js";import{m as ot,u as it}from"./filter-DotG3dS4.js";import{a as Da}from"./VDivider-Ba3Fromu.js";import{C as Ia}from"./confirm-dialog-CKdwDLUv.js";function Ye(e,l,t){return Object.keys(e).filter(a=>qt(a)&&a.endsWith(l)).reduce((a,n)=>(a[n.slice(0,-l.length)]=o=>e[n](o,t(o)),a),{})}const Ta={name:"AdminCreateUpdateButton",props:{update:{type:Boolean,default:!1},table:{type:String,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{mdiPencil:Wt}}};function Va(e,l,t,a,n,o){return t.update?(N(),M(z,V({key:0,icon:n.mdiPencil},e.$attrs,{size:t.size,density:t.density}),null,16,["icon","size","density"])):(N(),M(z,V({key:1},e.$attrs,{size:t.size,density:t.density}),{default:ae(()=>[b("span",null,"+ "+Oe(t.table),1)]),_:1},16,["size","density"]))}const Ca=J(Ta,[["render",Va]]),Ba={name:"AdminCreateUpdateDialog",components:{AdminCreateUpdateButton:Ca,SubmitFooter:pa},props:{table:{type:String,required:!0},label:{type:String,default:""},oldRow:{type:[Object,Boolean],default:!1},inputs:{type:Object,required:!0},size:{type:String,default:"default"},density:{type:String,default:"default"}},data(){return{row:{},showDialog:!1,submitButtonEnabled:!1}},computed:{verb(){return this.oldRow?"Update":"Add"},title(){return this.label||this.table},buttonTitle(){return(this.oldRow?"Edit":"Add")+" "+this.title}},watch:{showDialog(e){this.row=this.getRow(e)}},methods:{...Je(rt,["createRow","updateRow"]),validate(){let e=!1;for(const[t,a]of Object.entries(this.row))if(!ze(this.oldRow[t],a)){e=!0;break}if(!e)return!1;const l=this.$refs.form;return l?l.validate().then(({valid:t})=>t).catch(()=>!1):!1},change(e){this.row=e,this.submitButtonEnabled=this.validate()},getRow(e){if(!e||!this.oldRow)return Me(this.inputs.EMPTY_ROW);const l={};for(const t of this.inputs.UPDATE_KEYS)l[t]=Me(this.oldRow[t]);return l},doUpdate:function(){const e={};for(const[l,t]of Object.entries(this.row))ze(this.oldRow[l],t)||(e[l]=t);this.updateRow(this.table,this.oldRow.pk,e).then(()=>(this.showDialog=!1,!0)).catch(console.error)},doCreate:function(){this.createRow(this.table,this.row).then(()=>(this.showDialog=!1,!0)).catch(console.error)},submit:function(){const e=this.$refs.form;e&&e.validate().then(({valid:l})=>{if(l)return this.oldRow?this.doUpdate():this.doCreate()}).catch(console.warn)}}};function Fa(e,l,t,a,n,o){const i=se("AdminCreateUpdateButton"),r=se("SubmitFooter");return N(),M(Sa,V({modelValue:n.showDialog,"onUpdate:modelValue":l[1]||(l[1]=s=>n.showDialog=s),transition:"scale-transition"},e.$attrs),{activator:ae(({props:s})=>[S(i,V({update:!!t.oldRow,table:t.table,label:t.label},s,{size:t.size,density:t.density,title:o.buttonTitle}),null,16,["update","table","label","size","density","title"])]),default:ae(()=>[S(xa,{ref:"form",class:"cuForm"},{default:ae(()=>[b("h2",null,Oe(o.title),1),(N(),M(Kt(t.inputs),{"old-row":t.oldRow,onChange:o.change},null,40,["old-row","onChange"])),S(r,{verb:o.verb,table:t.table,label:t.label,disabled:!n.submitButtonEnabled,onSubmit:o.submit,onCancel:l[0]||(l[0]=s=>n.showDialog=!1)},null,8,["verb","table","label","disabled","onSubmit"])]),_:1},512)]),_:1},16,["modelValue"])}const Tl=J(Ba,[["render",Fa],["__scopeId","data-v-b61575f9"]]),Ra={name:"GroupChip",props:{titleKey:{type:String,default:""},groupType:{type:Boolean,default:void 0},item:{type:Object,default:void 0}},computed:{classes(){let e={};return this.groupType&&this.item&&(e.include=!this.item.exclude,e.exclude=this.item.exclude),e},text(){return this.item&&this.titleKey?this.item[this.titleKey]:""},value(){if(this.item)return this.groupType?this.item.exclude:this.item.value}}};function Aa(e,l,t,a,n,o){return N(),M(st,{class:Y(o.classes),text:o.text,value:o.value},null,8,["class","text","value"])}const ut=J(Ra,[["render",Aa],["__scopeId","data-v-fe7786ef"]]),Ea={name:"AdminRelationPicker",components:{GroupChip:ut},props:{objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{vuetifyItems(){const e=[];for(const l of this.objs)e.push({...l,value:l.pk,title:l[this.titleKey]});return e}}};function Oa(e,l,t,a,n,o){const i=se("GroupChip");return N(),M(Ne,V({chips:!0,"closable-chips":!0,density:"compact",multiple:!0,items:o.vuetifyItems},e.$attrs),{chip:ae(({item:r})=>[S(i,{"title-key":"title",item:r,"group-type":t.groupType},null,8,["item","group-type"])]),_:1},16,["items"])}const Vl=J(Ea,[["render",Oa]]);function $a(){const e=X([]);Ut(()=>e.value=[]);function l(t,a){e.value[a]=t}return{refs:e,updateRef:l}}const La=B({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:j,default:"$first"},prevIcon:{type:j,default:"$prev"},nextIcon:{type:j,default:"$next"},lastIcon:{type:j,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ma(),...Jt(),...va(),...fa(),...ca(),...da(),...ua({tag:"nav"}),...Zt(),...ia({variant:"text"})},"VPagination"),Qe=K()({name:"VPagination",props:La(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,l){let{slots:t,emit:a}=l;const n=Q(e,"modelValue"),{t:o,n:i}=oe(),{isRtl:r}=Xt(),{themeClasses:s}=Yt(e),{width:u}=pe(),f=fe(-1);ve(void 0,{scoped:!0});const{resizeRef:g}=Qt(y=>{if(!y.length)return;const{target:h,contentRect:c}=y[0],P=h.querySelector(".v-pagination__list > *");if(!P)return;const T=c.width,L=P.offsetWidth+parseFloat(getComputedStyle(P).marginRight)*2;f.value=w(T,L)}),d=_(()=>parseInt(e.length,10)),v=_(()=>parseInt(e.start,10)),x=_(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):f.value>=0?f.value:w(u.value,58));function w(y,h){const c=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((y-h*c)/h).toFixed(2))))}const m=_(()=>{if(d.value<=0||isNaN(d.value)||d.value>Number.MAX_SAFE_INTEGER)return[];if(x.value<=0)return[];if(x.value===1)return[n.value];if(d.value<=x.value)return ie(d.value,v.value);const y=x.value%2===0,h=y?x.value/2:Math.floor(x.value/2),c=y?h:h+1,P=d.value-h;if(c-n.value>=0)return[...ie(Math.max(1,x.value-1),v.value),e.ellipsis,d.value];if(n.value-P>=(y?1:0)){const T=x.value-1,L=d.value-T+v.value;return[v.value,e.ellipsis,...ie(T,L)]}else{const T=Math.max(1,x.value-2),L=T===1?n.value:n.value-Math.ceil(T/2)+v.value;return[v.value,e.ellipsis,...ie(T,L),e.ellipsis,d.value]}});function C(y,h,c){y.preventDefault(),n.value=h,c&&a(c,h)}const{refs:p,updateRef:D}=$a();ve({VPaginationBtn:{color:I(()=>e.color),border:I(()=>e.border),density:I(()=>e.density),size:I(()=>e.size),variant:I(()=>e.variant),rounded:I(()=>e.rounded),elevation:I(()=>e.elevation)}});const F=_(()=>m.value.map((y,h)=>{const c=P=>D(P,h);if(typeof y=="string")return{isActive:!1,key:`ellipsis-${h}`,page:y,props:{ref:c,ellipsis:!0,icon:!0,disabled:!0}};{const P=y===n.value;return{isActive:P,key:y,page:i(y),props:{ref:c,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:P?e.activeColor:e.color,"aria-current":P,"aria-label":o(P?e.currentPageAriaLabel:e.pageAriaLabel,y),onClick:T=>C(T,y)}}}})),k=_(()=>{const y=!!e.disabled||n.value<=v.value,h=!!e.disabled||n.value>=v.value+d.value-1;return{first:e.showFirstLastPage?{icon:r.value?e.lastIcon:e.firstIcon,onClick:c=>C(c,v.value,"first"),disabled:y,"aria-label":o(e.firstAriaLabel),"aria-disabled":y}:void 0,prev:{icon:r.value?e.nextIcon:e.prevIcon,onClick:c=>C(c,n.value-1,"prev"),disabled:y,"aria-label":o(e.previousAriaLabel),"aria-disabled":y},next:{icon:r.value?e.prevIcon:e.nextIcon,onClick:c=>C(c,n.value+1,"next"),disabled:h,"aria-label":o(e.nextAriaLabel),"aria-disabled":h},last:e.showFirstLastPage?{icon:r.value?e.firstIcon:e.lastIcon,onClick:c=>C(c,v.value+d.value-1,"last"),disabled:h,"aria-label":o(e.lastAriaLabel),"aria-disabled":h}:void 0}});function R(){const y=n.value-v.value;p.value[y]?.$el.focus()}function $(y){y.key===qe.left&&!e.disabled&&n.value>Number(e.start)?(n.value=n.value-1,We(R)):y.key===qe.right&&!e.disabled&&n.value<v.value+d.value-1&&(n.value=n.value+1,We(R))}return ee(()=>S(e.tag,{ref:g,class:Y(["v-pagination",s.value,e.class]),style:et(e.style),role:"navigation","aria-label":o(e.ariaLabel),onKeydown:$,"data-test":"v-pagination-root"},{default:()=>[b("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&b("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[t.first?t.first(k.value.first):S(z,V({_as:"VPaginationBtn"},k.value.first),null)]),b("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[t.prev?t.prev(k.value.prev):S(z,V({_as:"VPaginationBtn"},k.value.prev),null)]),F.value.map((y,h)=>b("li",{key:y.key,class:Y(["v-pagination__item",{"v-pagination__item--is-active":y.isActive}]),"data-test":"v-pagination-item"},[t.item?t.item(y):S(z,V({_as:"VPaginationBtn"},y.props),{default:()=>[y.page]})])),b("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[t.next?t.next(k.value.next):S(z,V({_as:"VPaginationBtn"},k.value.next),null)]),e.showFirstLastPage&&b("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[t.last?t.last(k.value.last):S(z,V({_as:"VPaginationBtn"},k.value.last),null)])])]})),{}}}),Na=B({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),dt=Symbol.for("vuetify:data-table-pagination");function Ga(e){const l=Q(e,"page",void 0,a=>Number(a??1)),t=Q(e,"itemsPerPage",void 0,a=>Number(a??10));return{page:l,itemsPerPage:t}}function Ha(e){const{page:l,itemsPerPage:t,itemsLength:a}=e,n=_(()=>t.value===-1?0:t.value*(l.value-1)),o=_(()=>t.value===-1?a.value:Math.min(a.value,n.value+t.value)),i=_(()=>t.value===-1||a.value===0?1:Math.ceil(a.value/t.value));$e([l,i],()=>{l.value>i.value&&(l.value=i.value)});function r(d){t.value=d,l.value=1}function s(){l.value=Fe(l.value+1,1,i.value)}function u(){l.value=Fe(l.value-1,1,i.value)}function f(d){l.value=Fe(d,1,i.value)}const g={page:l,itemsPerPage:t,startIndex:n,stopIndex:o,pageCount:i,itemsLength:a,nextPage:s,prevPage:u,setPage:f,setItemsPerPage:r};return ne(dt,g),g}function ja(){const e=le(dt);if(!e)throw new Error("Missing pagination!");return e}function za(e){const l=tt("usePaginatedItems"),{items:t,startIndex:a,stopIndex:n,itemsPerPage:o}=e,i=_(()=>o.value<=0?t.value:t.value.slice(a.value,n.value));return $e(i,r=>{l.emit("update:currentItems",r)},{immediate:!0}),{paginatedItems:i}}const ct=B({prevIcon:{type:j,default:"$prev"},nextIcon:{type:j,default:"$next"},firstIcon:{type:j,default:"$first"},lastIcon:{type:j,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ze=K()({name:"VDataTableFooter",props:ct(),setup(e,l){let{slots:t}=l;const{t:a}=oe(),{page:n,pageCount:o,startIndex:i,stopIndex:r,itemsLength:s,itemsPerPage:u,setItemsPerPage:f}=ja(),g=_(()=>e.itemsPerPageOptions.map(d=>typeof d=="number"?{value:d,title:d===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(d)}:{...d,title:isNaN(Number(d.title))?a(d.title):d.title}));return ee(()=>{const d=Qe.filterProps(e);return b("div",{class:"v-data-table-footer"},[t.prepend?.(),b("div",{class:"v-data-table-footer__items-per-page"},[b("span",{"aria-label":a(e.itemsPerPageText)},[a(e.itemsPerPageText)]),S(Ne,{items:g.value,modelValue:u.value,"onUpdate:modelValue":v=>f(Number(v)),density:"compact",variant:"outlined",hideDetails:!0},null)]),b("div",{class:"v-data-table-footer__info"},[b("div",null,[a(e.pageText,s.value?i.value+1:0,r.value,s.value)])]),b("div",{class:"v-data-table-footer__pagination"},[S(Qe,V({modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,density:"comfortable",firstAriaLabel:e.firstPageLabel,lastAriaLabel:e.lastPageLabel,length:o.value,nextAriaLabel:e.nextPageLabel,previousAriaLabel:e.prevPageLabel,rounded:!0,showFirstLastPage:!0,totalVisible:e.showCurrentPage?1:0,variant:"plain"},d),null)])])}),{}}}),be=ea({align:{type:String,default:"start"},fixed:{type:[Boolean,String],default:!1},fixedOffset:[Number,String],fixedEndOffset:[Number,String],height:[Number,String],lastFixed:Boolean,firstFixedEnd:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,l)=>{let{slots:t}=l;const a=e.tag??"td",n=typeof e.fixed=="string"?e.fixed:e.fixed?"start":"none";return S(a,{class:Y(["v-data-table__td",{"v-data-table-column--fixed":n==="start","v-data-table-column--fixed-end":n==="end","v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--first-fixed-end":e.firstFixedEnd,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`]),style:{height:A(e.height),width:A(e.width),maxWidth:A(e.maxWidth),left:n==="start"?A(e.fixedOffset||null):void 0,right:n==="end"?A(e.fixedEndOffset||null):void 0}},{default:()=>[t.default?.()]})}),Ma=B({headers:Array},"DataTable-header"),ft=Symbol.for("vuetify:data-table-headers"),vt={title:"",sortable:!1},qa={...vt,width:48};function Wa(){const l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(t=>({element:t,priority:0}));return{enqueue:(t,a)=>{let n=!1;for(let o=0;o<l.length;o++)if(l[o].priority>a){l.splice(o,0,{element:t,priority:a}),n=!0;break}n||l.push({element:t,priority:a})},size:()=>l.length,count:()=>{let t=0;if(!l.length)return 0;const a=Math.floor(l[0].priority);for(let n=0;n<l.length;n++)Math.floor(l[n].priority)===a&&(t+=1);return t},dequeue:()=>l.shift()}}function Ee(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)l.push(e);else for(const t of e.children)Ee(t,l);return l}function mt(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const t of e)t.key&&l.add(t.key),t.children&&mt(t.children,l);return l}function Ka(e){if(e.key){if(e.key==="data-table-group")return vt;if(["data-table-expand","data-table-select"].includes(e.key))return qa}}function He(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(l,...e.children.map(t=>He(t,l+1))):l}function Ua(e){let l=!1;function t(r,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"none";if(!r)return;u!=="none"&&(r.fixed=u),r.fixed===!0&&(r.fixed="start");const f=s==="start"?r.children?.toReversed():r.children;if(r.fixed===s)if(f)for(const g of f)t(g,s,s);else!l&&s==="start"?r.lastFixed=!0:!l&&s==="end"?r.firstFixedEnd=!0:isNaN(Number(r.width))?la(`Multiple fixed columns should have a static width (key: ${r.key})`):r.minWidth=Math.max(Number(r.width)||0,Number(r.minWidth)||0),l=!0;else if(f)for(const g of f)t(g,s);else l=!1}for(const r of e.toReversed())t(r,"start");for(const r of e)t(r,"end");function a(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!r)return s;if(r.children){r.fixedOffset=s;for(const u of r.children)s=a(u,s)}else r.fixed&&r.fixed!=="end"&&(r.fixedOffset=s,s+=parseFloat(r.width||"0")||0);return s}let n=0;for(const r of e)n=a(r,n);function o(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!r)return s;if(r.children){r.fixedEndOffset=s;for(const u of r.children)s=o(u,s)}else r.fixed==="end"&&(r.fixedEndOffset=s,s+=parseFloat(r.width||"0")||0);return s}let i=0;for(const r of e.toReversed())i=o(r,i)}function Xa(e,l){const t=[];let a=0;const n=Wa(e);for(;n.size()>0;){let i=n.count();const r=[];let s=1;for(;i>0;){const{element:u,priority:f}=n.dequeue(),g=l-a-He(u);if(r.push({...u,rowspan:g??1,colspan:u.children?Ee(u).length:1}),u.children)for(const d of u.children){const v=f%1+s/Math.pow(10,a+2);n.enqueue(d,a+g+v)}s+=1,i-=1}a+=1,t.push(r)}return{columns:e.map(i=>Ee(i)).flat(),headers:t}}function gt(e){const l=[];for(const t of e){const a={...Ka(t),...t},n=a.key??(typeof a.value=="string"?a.value:null),o=a.value??n??null,i={...a,key:n,value:o,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?gt(a.children):void 0};l.push(i)}return l}function bt(e,l){const t=X([]),a=X([]),n=X({}),o=X({}),i=X({});ta(()=>{const u=(e.headers||Object.keys(e.items[0]??{}).map(w=>({key:w,title:aa(w)}))).slice(),f=mt(u);l?.groupBy?.value.length&&!f.has("data-table-group")&&u.unshift({key:"data-table-group",title:"Group"}),l?.showSelect?.value&&!f.has("data-table-select")&&u.unshift({key:"data-table-select"}),l?.showExpand?.value&&!f.has("data-table-expand")&&u.push({key:"data-table-expand"});const g=gt(u);Ua(g);const d=Math.max(...g.map(w=>He(w)))+1,v=Xa(g,d);t.value=v.headers,a.value=v.columns;const x=v.headers.flat(1);for(const w of x)w.key&&(w.sortable&&(w.sort&&(n.value[w.key]=w.sort),w.sortRaw&&(o.value[w.key]=w.sortRaw)),w.filter&&(i.value[w.key]=w.filter))});const r={headers:t,columns:a,sortFunctions:n,sortRawFunctions:o,filterFunctions:i};return ne(ft,r),r}function xe(){const e=le(ft);if(!e)throw new Error("Missing headers!");return e}const Ya={showSelectAll:!1,allSelected:()=>[],select:e=>{let{items:l,value:t}=e;return new Set(t?[l[0]?.value]:[])},selectAll:e=>{let{selected:l}=e;return l}},ht={showSelectAll:!0,allSelected:e=>{let{currentPage:l}=e;return l},select:e=>{let{items:l,value:t,selected:a}=e;for(const n of l)t?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:l,currentPage:t,selected:a}=e;return ht.select({items:t,value:l,selected:a})}},yt={showSelectAll:!0,allSelected:e=>{let{allItems:l}=e;return l},select:e=>{let{items:l,value:t,selected:a}=e;for(const n of l)t?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:l,allItems:t,selected:a}=e;return yt.select({items:t,value:l,selected:a})}},Qa=B({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:at}},"DataTable-select"),pt=Symbol.for("vuetify:data-table-selection");function xt(e,l){let{allItems:t,currentPage:a}=l;const n=Q(e,"modelValue",e.modelValue,p=>new Set(Re(p).map(D=>t.value.find(F=>e.valueComparator(D,F.value))?.value??D)),p=>[...p.values()]),o=_(()=>t.value.filter(p=>p.selectable)),i=_(()=>a.value.filter(p=>p.selectable)),r=_(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Ya;case"all":return yt;case"page":default:return ht}}),s=fe(null);function u(p){return Re(p).every(D=>n.value.has(D.value))}function f(p){return Re(p).some(D=>n.value.has(D.value))}function g(p,D){const F=r.value.select({items:p,value:D,selected:new Set(n.value)});n.value=F}function d(p,D,F){const k=[];if(D=D??a.value.findIndex(R=>R.value===p.value),e.selectStrategy!=="single"&&F?.shiftKey&&s.value!==null){const[R,$]=[s.value,D].sort((y,h)=>y-h);k.push(...a.value.slice(R,$+1).filter(y=>y.selectable))}else k.push(p),s.value=D;g(k,!u([p]))}function v(p){const D=r.value.selectAll({value:p,allItems:o.value,currentPage:i.value,selected:new Set(n.value)});n.value=D}const x=_(()=>n.value.size>0),w=_(()=>{const p=r.value.allSelected({allItems:o.value,currentPage:i.value});return!!p.length&&u(p)}),m=I(()=>r.value.showSelectAll),C={toggleSelect:d,select:g,selectAll:v,isSelected:u,isSomeSelected:f,someSelected:x,allSelected:w,showSelectAll:m,lastSelectedIndex:s,selectStrategy:r};return ne(pt,C),C}function Se(){const e=le(pt);if(!e)throw new Error("Missing selection!");return e}const Za=B({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),St=Symbol.for("vuetify:data-table-sort");function wt(e){const l=Q(e,"sortBy"),t=I(()=>e.mustSort),a=I(()=>e.multiSort);return{sortBy:l,mustSort:t,multiSort:a}}function Pt(e){const{sortBy:l,mustSort:t,multiSort:a,page:n}=e,o=s=>{if(s.key==null)return;let u=l.value.map(g=>({...g}))??[];const f=u.find(g=>g.key===s.key);f?f.order==="desc"?t.value&&u.length===1?f.order="asc":u=u.filter(g=>g.key!==s.key):f.order="desc":a.value?u.push({key:s.key,order:"asc"}):u=[{key:s.key,order:"asc"}],l.value=u,n&&(n.value=1)};function i(s){return!!l.value.find(u=>u.key===s.key)}const r={sortBy:l,toggleSort:o,isSorted:i};return ne(St,r),r}function kt(){const e=le(St);if(!e)throw new Error("Missing sort!");return e}function _t(e,l,t,a){const n=oe();return{sortedItems:_(()=>t.value.length?Ja(l.value,t.value,n.current.value,{transform:a?.transform,sortFunctions:{...e.customKeySort,...a?.sortFunctions?.value},sortRawFunctions:a?.sortRawFunctions?.value}):l.value)}}function Ja(e,l,t,a){const n=new Intl.Collator(t,{sensitivity:"accent",usage:"sort"});return e.map(i=>[i,a?.transform?a.transform(i):i]).sort((i,r)=>{for(let s=0;s<l.length;s++){let u=!1;const f=l[s].key,g=l[s].order??"asc";if(g===!1)continue;let d=me(i[1],f),v=me(r[1],f),x=i[0].raw,w=r[0].raw;if(g==="desc"&&([d,v]=[v,d],[x,w]=[w,x]),a?.sortRawFunctions?.[f]){const m=a.sortRawFunctions[f](x,w);if(m==null)continue;if(u=!0,m)return m}if(a?.sortFunctions?.[f]){const m=a.sortFunctions[f](d,v);if(m==null)continue;if(u=!0,m)return m}if(!u&&(d instanceof Date&&v instanceof Date&&(d=d.getTime(),v=v.getTime()),[d,v]=[d,v].map(m=>m!=null?m.toString().toLocaleLowerCase():m),d!==v))return ue(d)&&ue(v)?0:ue(d)?-1:ue(v)?1:!isNaN(d)&&!isNaN(v)?Number(d)-Number(v):n.compare(d,v)}return 0}).map(i=>{let[r]=i;return r})}const Dt=B({color:String,disableSort:Boolean,fixedHeader:Boolean,multiSort:Boolean,sortAscIcon:{type:j,default:"$sortAsc"},sortDescIcon:{type:j,default:"$sortDesc"},headerProps:{type:Object},sticky:Boolean,...Le(),...ya()},"VDataTableHeaders"),he=K()({name:"VDataTableHeaders",props:Dt(),setup(e,l){let{slots:t}=l;const{t:a}=oe(),{toggleSort:n,sortBy:o,isSorted:i}=kt(),{someSelected:r,allSelected:s,selectAll:u,showSelectAll:f}=Se(),{columns:g,headers:d}=xe(),{loaderClasses:v}=ga(e);function x(h,c){if(!(e.sticky||e.fixedHeader)&&!h.fixed)return;const P=typeof h.fixed=="string"?h.fixed:h.fixed?"start":"none";return{position:"sticky",left:P==="start"?A(h.fixedOffset):void 0,right:P==="end"?A(h.fixedEndOffset):void 0,top:e.sticky||e.fixedHeader?`calc(var(--v-table-header-height) * ${c})`:void 0}}function w(h,c){h.key==="Enter"&&!e.disableSort&&n(c)}function m(h){const c=o.value.find(P=>P.key===h.key);return c?c.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:C,backgroundColorStyles:p}=ba(()=>e.color),{displayClasses:D,mobile:F}=pe(e),k=_(()=>({headers:d.value,columns:g.value,toggleSort:n,isSorted:i,sortBy:o.value,someSelected:r.value,allSelected:s.value,selectAll:u,getSortIcon:m})),R=_(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky||e.fixedHeader},D.value,v.value]),$=h=>{let{column:c,x:P,y:T}=h;const L=c.key==="data-table-select"||c.key==="data-table-expand",re=V(e.headerProps??{},c.headerProps??{});return S(be,V({tag:"th",align:c.align,class:[{"v-data-table__th--sortable":c.sortable&&!e.disableSort,"v-data-table__th--sorted":i(c),"v-data-table__th--fixed":c.fixed},...R.value],style:{width:A(c.width),minWidth:A(c.minWidth),maxWidth:A(c.maxWidth),...x(c,T)},colspan:c.colspan,rowspan:c.rowspan,fixed:c.fixed,nowrap:c.nowrap,lastFixed:c.lastFixed,firstFixedEnd:c.firstFixedEnd,noPadding:L,tabindex:c.sortable?0:void 0,onClick:c.sortable?()=>n(c):void 0,onKeydown:c.sortable?q=>w(q,c):void 0},re),{default:()=>{const q=`header.${c.key}`,W={column:c,selectAll:u,isSorted:i,toggleSort:n,sortBy:o.value,someSelected:r.value,allSelected:s.value,getSortIcon:m};return t[q]?t[q](W):c.key==="data-table-select"?t["header.data-table-select"]?.(W)??(f.value&&S(Ge,{modelValue:s.value,indeterminate:r.value&&!s.value,"onUpdate:modelValue":u},null)):b("div",{class:"v-data-table-header__content"},[b("span",null,[c.title]),c.sortable&&!e.disableSort&&S(Xe,{key:"icon",class:"v-data-table-header__sort-icon",icon:m(c)},null),e.multiSort&&i(c)&&b("div",{key:"badge",class:Y(["v-data-table-header__sort-badge",...C.value]),style:et(p.value)},[o.value.findIndex(U=>U.key===c.key)+1])])}})},y=()=>{const h=_(()=>g.value.filter(P=>P?.sortable&&!e.disableSort)),c=_(()=>{if(g.value.find(T=>T.key==="data-table-select")!=null)return s.value?"$checkboxOn":r.value?"$checkboxIndeterminate":"$checkboxOff"});return S(be,V({tag:"th",class:[...R.value],colspan:d.value.length+1},e.headerProps),{default:()=>[b("div",{class:"v-data-table-header__content"},[S(Ne,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:h.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>o.value=[],appendIcon:c.value,"onClick:append":()=>u(!s.value)},{chip:P=>S(st,{onClick:P.item.raw?.sortable?()=>n(P.item.raw):void 0,onMousedown:T=>{T.preventDefault(),T.stopPropagation()}},{default:()=>[P.item.title,S(Xe,{class:Y(["v-data-table__td-sort-icon",i(P.item.raw)&&"v-data-table__td-sort-icon-active"]),icon:m(P.item.raw),size:"small"},null)]})})])]})};ee(()=>F.value?b("tr",null,[S(y,null,null)]):b(Z,null,[t.headers?t.headers(k.value):d.value.map((h,c)=>b("tr",null,[h.map((P,T)=>S($,{column:P,x:T,y:c},null))])),e.loading&&b("tr",{class:"v-data-table-progress"},[b("th",{colspan:g.value.length},[S(ha,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:t.loader})])])]))}}),It=B({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),Tt=Symbol.for("vuetify:data-table-group");function Vt(e){return{groupBy:Q(e,"groupBy")}}function Ct(e){const{disableSort:l,groupBy:t,sortBy:a}=e,n=X(new Set),o=_(()=>t.value.map(f=>({...f,order:f.order??!1})).concat(l?.value?[]:a.value));function i(f){return n.value.has(f.id)}function r(f){const g=new Set(n.value);i(f)?g.delete(f.id):g.add(f.id),n.value=g}function s(f){function g(d){const v=[];for(const x of d.items)"type"in x&&x.type==="group"?v.push(...g(x)):v.push(x);return[...new Set(v)]}return g({items:f})}const u={sortByWithGroups:o,toggleGroup:r,opened:n,groupBy:t,extractRows:s,isGroupOpen:i};return ne(Tt,u),u}function Bt(){const e=le(Tt);if(!e)throw new Error("Missing group!");return e}function el(e,l){if(!e.length)return[];const t=new Map;for(const a of e){const n=me(a.raw,l);t.has(n)||t.set(n,[]),t.get(n).push(a)}return t}function Ft(e,l){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!l.length)return[];const n=el(e,l[0]),o=[],i=l.slice(1);return n.forEach((r,s)=>{const u=l[0],f=`${a}_${u}_${s}`;o.push({depth:t,id:f,key:u,value:s,items:i.length?Ft(r,i,t+1,f):r,type:"group"})}),o}function Rt(e,l){const t=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&t.push(a),(l.has(a.id)||a.value==null)&&t.push(...Rt(a.items,l))):t.push(a);return t}function At(e,l,t){return{flatItems:_(()=>{if(!l.value.length)return e.value;const n=Ft(e.value,l.value.map(o=>o.key));return Rt(n,t.value)})}}const tl=B({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),al=K()({name:"VDataTableGroupHeaderRow",props:tl(),setup(e,l){let{slots:t}=l;const{isGroupOpen:a,toggleGroup:n,extractRows:o}=Bt(),{isSelected:i,isSomeSelected:r,select:s}=Se(),{columns:u}=xe(),f=_(()=>o([e.item]));return()=>b("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[u.value.map(g=>{if(g.key==="data-table-group"){const d=a(e.item)?"$expand":"$next",v=()=>n(e.item);return t["data-table-group"]?.({item:e.item,count:f.value.length,props:{icon:d,onClick:v}})??S(be,{class:"v-data-table-group-header-row__column"},{default:()=>[S(z,{size:"small",variant:"text",icon:d,onClick:v},null),b("span",null,[e.item.value]),b("span",null,[Ke("("),f.value.length,Ke(")")])]})}if(g.key==="data-table-select"){const d=i(f.value),v=r(f.value)&&!d,x=w=>s(f.value,w);return t["data-table-select"]?.({props:{modelValue:d,indeterminate:v,"onUpdate:modelValue":x}})??b("td",null,[S(Ge,{modelValue:d,indeterminate:v,"onUpdate:modelValue":x},null)])}return b("td",null,null)})])}}),ll=B({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),Et=Symbol.for("vuetify:datatable:expanded");function Ot(e){const l=I(()=>e.expandOnClick),t=Q(e,"expanded",e.expanded,r=>new Set(r),r=>[...r.values()]);function a(r,s){const u=new Set(t.value);s?u.add(r.value):u.delete(r.value),t.value=u}function n(r){return t.value.has(r.value)}function o(r){a(r,!n(r))}const i={expand:a,expanded:t,expandOnClick:l,isExpanded:n,toggleExpand:o};return ne(Et,i),i}function $t(){const e=le(Et);if(!e)throw new Error("foo");return e}const nl=B({index:Number,item:Object,cellProps:[Object,Function],onClick:Ae(),onContextmenu:Ae(),onDblclick:Ae(),...Le()},"VDataTableRow"),Lt=K()({name:"VDataTableRow",props:nl(),setup(e,l){let{slots:t}=l;const{displayClasses:a,mobile:n}=pe(e,"v-data-table__tr"),{isSelected:o,toggleSelect:i,someSelected:r,allSelected:s,selectAll:u}=Se(),{isExpanded:f,toggleExpand:g}=$t(),{toggleSort:d,sortBy:v,isSorted:x}=kt(),{columns:w}=xe();ee(()=>b("tr",{class:Y(["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value]),onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&w.value.map((m,C)=>{const p=e.item,D=`item.${m.key}`,F=`header.${m.key}`,k={index:e.index,item:p.raw,internalItem:p,value:me(p.columns,m.key),column:m,isSelected:o,toggleSelect:i,isExpanded:f,toggleExpand:g},R={column:m,selectAll:u,isSorted:x,toggleSort:d,sortBy:v.value,someSelected:r.value,allSelected:s.value,getSortIcon:()=>""},$=typeof e.cellProps=="function"?e.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value,column:m}):e.cellProps,y=typeof m.cellProps=="function"?m.cellProps({index:k.index,item:k.item,internalItem:k.internalItem,value:k.value}):m.cellProps;return S(be,V({align:m.align,class:{"v-data-table__td--expanded-row":m.key==="data-table-expand","v-data-table__td--select-row":m.key==="data-table-select"},fixed:m.fixed,fixedOffset:m.fixedOffset,fixedEndOffset:m.fixedEndOffset,lastFixed:m.lastFixed,firstFixedEnd:m.firstFixedEnd,maxWidth:n.value?void 0:m.maxWidth,noPadding:m.key==="data-table-select"||m.key==="data-table-expand",nowrap:m.nowrap,width:n.value?void 0:m.width},$,y),{default:()=>{if(m.key==="data-table-select")return t["item.data-table-select"]?.({...k,props:{disabled:!p.selectable,modelValue:o([p]),onClick:de(()=>i(p),["stop"])}})??S(Ge,{disabled:!p.selectable,modelValue:o([p]),onClick:de(c=>i(p,e.index,c),["stop"])},null);if(m.key==="data-table-expand")return t["item.data-table-expand"]?.({...k,props:{icon:f(p)?"$collapse":"$expand",size:"small",variant:"text",onClick:de(()=>g(p),["stop"])}})??S(z,{icon:f(p)?"$collapse":"$expand",size:"small",variant:"text",onClick:de(()=>g(p),["stop"])},null);if(t[D]&&!n.value)return t[D](k);const h=Oe(k.value);return n.value?b(Z,null,[b("div",{class:"v-data-table__td-title"},[t[F]?.(R)??m.title]),b("div",{class:"v-data-table__td-value"},[t[D]?.(k)??h])]):h}})})]))}}),Nt=B({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...Le()},"VDataTableRows"),ye=K()({name:"VDataTableRows",inheritAttrs:!1,props:Nt(),setup(e,l){let{attrs:t,slots:a}=l;const{columns:n}=xe(),{expandOnClick:o,toggleExpand:i,isExpanded:r}=$t(),{isSelected:s,toggleSelect:u}=Se(),{toggleGroup:f,isGroupOpen:g}=Bt(),{t:d}=oe(),{mobile:v}=pe(e);return ee(()=>e.loading&&(!e.items.length||a.loading)?b("tr",{class:"v-data-table-rows-loading",key:"loading"},[b("td",{colspan:n.value.length},[a.loading?.()??d(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?b("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[b("td",{colspan:n.value.length},[a["no-data"]?.()??d(e.noDataText)])]):b(Z,null,[e.items.map((x,w)=>{if(x.type==="group"){const p={index:w,item:x,columns:n.value,isExpanded:r,toggleExpand:i,isSelected:s,toggleSelect:u,toggleGroup:f,isGroupOpen:g};return a["group-header"]?a["group-header"](p):S(al,V({key:`group-header_${x.id}`,item:x},Ye(t,":group-header",()=>p)),a)}const m={index:w,item:x.raw,internalItem:x,columns:n.value,isExpanded:r,toggleExpand:i,isSelected:s,toggleSelect:u},C={...m,props:V({key:`item_${x.key??x.index}`,onClick:o.value?()=>{i(x)}:void 0,index:w,item:x,cellProps:e.cellProps,mobile:v.value},Ye(t,":row",()=>m),typeof e.rowProps=="function"?e.rowProps({item:m.item,index:m.index,internalItem:m.internalItem}):e.rowProps)};return b(Z,{key:C.props.key},[a.item?a.item(C):S(Lt,C.props,a),r(x)&&a["expanded-row"]?.(m)])})])),{}}}),rl=B({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function sl(e,l,t,a){const n=e.returnObject?l:ce(l,e.itemValue),o=ce(l,e.itemSelectable,!0),i=a.reduce((r,s)=>(s.key!=null&&(r[s.key]=ce(l,s.value)),r),{});return{type:"item",key:e.returnObject?ce(l,e.itemValue):n,index:t,value:n,selectable:o,columns:i,raw:l}}function ol(e,l,t){return l.map((a,n)=>sl(e,a,n,t))}function Gt(e,l){return{items:_(()=>ol(e,e.items,l.value))}}function Ht(e){let{page:l,itemsPerPage:t,sortBy:a,groupBy:n,search:o}=e;const i=tt("VDataTable"),r=()=>({page:l.value,itemsPerPage:t.value,sortBy:a.value,groupBy:n.value,search:o.value});let s=null;$e(r,u=>{at(s,u)||(s&&s.search!==u.search&&(l.value=1),i.emit("update:options",u),s=u)},{deep:!0,immediate:!0})}const jt=B({...Nt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...ll(),...It(),...Ma(),...rl(),...Qa(),...Za(),...Dt(),..._a()},"DataTable"),il=B({...Na(),...jt(),...ot(),...ct()},"VDataTable");K()({name:"VDataTable",props:il(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,l){let{attrs:t,slots:a}=l;const{groupBy:n}=Vt(e),{sortBy:o,multiSort:i,mustSort:r}=wt(e),{page:s,itemsPerPage:u}=Ga(e),{disableSort:f}=lt(e),{columns:g,headers:d,sortFunctions:v,sortRawFunctions:x,filterFunctions:w}=bt(e,{groupBy:n,showSelect:I(()=>e.showSelect),showExpand:I(()=>e.showExpand)}),{items:m}=Gt(e,g),C=I(()=>e.search),{filteredItems:p}=it(e,m,C,{transform:G=>G.columns,customKeyFilter:w}),{toggleSort:D}=Pt({sortBy:o,multiSort:i,mustSort:r,page:s}),{sortByWithGroups:F,opened:k,extractRows:R,isGroupOpen:$,toggleGroup:y}=Ct({groupBy:n,sortBy:o,disableSort:f}),{sortedItems:h}=_t(e,p,F,{transform:G=>({...G.raw,...G.columns}),sortFunctions:v,sortRawFunctions:x}),{flatItems:c}=At(h,n,k),P=_(()=>c.value.length),{startIndex:T,stopIndex:L,pageCount:re,setItemsPerPage:q}=Ha({page:s,itemsPerPage:u,itemsLength:P}),{paginatedItems:W}=za({items:c,startIndex:T,stopIndex:L,itemsPerPage:u}),U=_(()=>R(W.value)),{isSelected:we,select:Pe,selectAll:ke,toggleSelect:_e,someSelected:De,allSelected:Ie}=xt(e,{allItems:m,currentPage:U}),{isExpanded:Te,toggleExpand:Ve}=Ot(e);Ht({page:s,itemsPerPage:u,sortBy:o,groupBy:n,search:C}),ve({VDataTableRows:{hideNoData:I(()=>e.hideNoData),noDataText:I(()=>e.noDataText),loading:I(()=>e.loading),loadingText:I(()=>e.loadingText)}});const E=_(()=>({page:s.value,itemsPerPage:u.value,sortBy:o.value,pageCount:re.value,toggleSort:D,setItemsPerPage:q,someSelected:De.value,allSelected:Ie.value,isSelected:we,select:Pe,selectAll:ke,toggleSelect:_e,isExpanded:Te,toggleExpand:Ve,isGroupOpen:$,toggleGroup:y,items:U.value.map(G=>G.raw),internalItems:U.value,groupedItems:W.value,columns:g.value,headers:d.value}));return ee(()=>{const G=Ze.filterProps(e),Ce=he.filterProps(e),H=ye.filterProps(e),O=ge.filterProps(e);return S(ge,V({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},O,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(E.value),default:()=>a.default?a.default(E.value):b(Z,null,[a.colgroup?.(E.value),!e.hideDefaultHeader&&b("thead",{key:"thead"},[S(he,Ce,a)]),a.thead?.(E.value),!e.hideDefaultBody&&b("tbody",null,[a["body.prepend"]?.(E.value),a.body?a.body(E.value):S(ye,V(t,H,{items:W.value}),a),a["body.append"]?.(E.value)]),a.tbody?.(E.value),a.tfoot?.(E.value)]),bottom:()=>a.bottom?a.bottom(E.value):!e.hideDefaultFooter&&b(Z,null,[S(Da,null,null),S(Ze,G,{prepend:a["footer.prepend"]})])})}),{}}});const ul=B({...na(jt(),["hideDefaultFooter"]),...It(),...Pa(),...ot()},"VDataTableVirtual"),dl=K()({name:"VDataTableVirtual",props:ul(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,l){let{attrs:t,slots:a}=l;const{groupBy:n}=Vt(e),{sortBy:o,multiSort:i,mustSort:r}=wt(e),{disableSort:s}=lt(e),{columns:u,headers:f,filterFunctions:g,sortFunctions:d,sortRawFunctions:v}=bt(e,{groupBy:n,showSelect:I(()=>e.showSelect),showExpand:I(()=>e.showExpand)}),{items:x}=Gt(e,u),w=I(()=>e.search),{filteredItems:m}=it(e,x,w,{transform:O=>O.columns,customKeyFilter:g}),{toggleSort:C}=Pt({sortBy:o,multiSort:i,mustSort:r}),{sortByWithGroups:p,opened:D,extractRows:F,isGroupOpen:k,toggleGroup:R}=Ct({groupBy:n,sortBy:o,disableSort:s}),{sortedItems:$}=_t(e,m,p,{transform:O=>({...O.raw,...O.columns}),sortFunctions:d,sortRawFunctions:v}),{flatItems:y}=At($,n,D),h=_(()=>F(y.value)),{isSelected:c,select:P,selectAll:T,toggleSelect:L,someSelected:re,allSelected:q}=xt(e,{allItems:h,currentPage:h}),{isExpanded:W,toggleExpand:U}=Ot(e),{containerRef:we,markerRef:Pe,paddingTop:ke,paddingBottom:_e,computedItems:De,handleItemResize:Ie,handleScroll:Te,handleScrollend:Ve,calculateVisibleItems:E,scrollToIndex:G}=wa(e,y),Ce=_(()=>De.value.map(O=>O.raw));Ht({sortBy:o,page:fe(1),itemsPerPage:fe(-1),groupBy:n,search:w}),ve({VDataTableRows:{hideNoData:I(()=>e.hideNoData),noDataText:I(()=>e.noDataText),loading:I(()=>e.loading),loadingText:I(()=>e.loadingText)}});const H=_(()=>({sortBy:o.value,toggleSort:C,someSelected:re.value,allSelected:q.value,isSelected:c,select:P,selectAll:T,toggleSelect:L,isExpanded:W,toggleExpand:U,isGroupOpen:k,toggleGroup:R,items:h.value.map(O=>O.raw),internalItems:h.value,groupedItems:y.value,columns:u.value,headers:f.value}));return ee(()=>{const O=he.filterProps(e),zt=ye.filterProps(e),Mt=ge.filterProps(e);return S(ge,V({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},Mt,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>a.top?.(H.value),wrapper:()=>b("div",{ref:we,onScrollPassive:Te,onScrollend:Ve,class:"v-table__wrapper",style:{height:A(e.height)}},[b("table",null,[a.colgroup?.(H.value),!e.hideDefaultHeader&&b("thead",{key:"thead"},[S(he,O,a)]),a.thead?.(H.value),!e.hideDefaultBody&&b("tbody",{key:"tbody"},[b("tr",{ref:Pe,style:{height:A(ke.value),border:0}},[b("td",{colspan:u.value.length,style:{height:0,border:0}},null)]),a["body.prepend"]?.(H.value),S(ye,V(t,zt,{items:Ce.value}),{...a,item:te=>S(ka,{key:te.internalItem.index,renderless:!0,"onUpdate:height":Be=>Ie(te.internalItem.index,Be)},{default:Be=>{let{itemRef:je}=Be;return a.item?.({...te,itemRef:je})??S(Lt,V(te.props,{ref:je,key:te.internalItem.index,index:te.internalItem.index}),a)}})}),a["body.append"]?.(H.value),b("tr",{style:{height:A(_e.value),border:0}},[b("td",{colspan:u.value.length,style:{height:0,border:0}},null)])]),a.tbody?.(H.value),a.tfoot?.(H.value)])]),bottom:()=>a.bottom?.(H.value)})}),{calculateVisibleItems:E,scrollToIndex:G}}}),cl={name:"AdminTable"};function fl(e,l,t,a,n,o){return N(),M(dl,{"fixed-header":"","item-value":"pk",mobile:e.$vuetify.display.xs},ra({_:2},[nt(e.$slots,(i,r)=>({name:r,fn:ae(s=>[sa(e.$slots,r,V({props:i},s),void 0,!0)])}))]),1032,["mobile"])}const Cl=J(cl,[["render",fl],["__scopeId","data-v-8b5d9183"]]),vl={name:"AdminDeleteRowDialog",components:{ConfirmDialog:Ia},props:{table:{type:String,required:!0},pk:{type:Number,required:!0},name:{type:String,required:!0}},data(){return{mdiTrashCan:oa}},computed:{titleText(){return`Delete ${this.table}`}},methods:{...Je(rt,["deleteRow"]),confirm(){this.deleteRow(this.table,this.pk),this.showDialog=!1}}};function ml(e,l,t,a,n,o){const i=se("ConfirmDialog");return N(),M(i,{icon:n.mdiTrashCan,"title-text":o.titleText,text:t.name,"confirm-text":o.titleText,onConfirm:o.confirm},null,8,["icon","title-text","text","confirm-text","onConfirm"])}const Bl=J(vl,[["render",ml]]),gl={name:"RelationChips",components:{GroupChip:ut},props:{pks:{type:Array,required:!0},objs:{type:Object,required:!0},titleKey:{type:String,required:!0},groupType:{type:Boolean,default:!1}},computed:{map(){const e={};for(const l of this.objs)e[l.pk]=l;return e}}};function bl(e,l,t,a,n,o){const i=se("GroupChip");return N(),Ue("span",null,[(N(!0),Ue(Z,null,nt(t.pks,r=>(N(),M(i,{key:r,"title-key":t.titleKey,"group-type":t.groupType,item:o.map[r]},null,8,["title-key","group-type","item"]))),128))])}const Fl=J(gl,[["render",bl]]);export{Vl as A,ut as G,Fl as R,Tl as a,Bl as b,Cl as c};
