(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{74833:function(e,t,n){var r=n(56127),s=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(s,""):e}},56127:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},66726:function(e,t,n){var r=n(11611),s=n(82846),i=n(91936),o=Math.max,a=Math.min;e.exports=function(e,t,n){var l,u,c,d,m,p,v=0,f=!1,g=!1,y=!0;if("function"!=typeof e)throw TypeError("Expected a function");function h(t){var n=l,r=u;return l=u=void 0,v=t,d=e.apply(r,n)}function x(e){var n=e-p,r=e-v;return void 0===p||n>=t||n<0||g&&r>=c}function j(){var e,n,r,i=s();if(x(i))return b(i);m=setTimeout(j,(e=i-p,n=i-v,r=t-e,g?a(r,c-n):r))}function b(e){return(m=void 0,y&&l)?h(e):(l=u=void 0,d)}function _(){var e,n=s(),r=x(n);if(l=arguments,u=this,p=n,r){if(void 0===m)return v=e=p,m=setTimeout(j,t),f?h(e):d;if(g)return clearTimeout(m),m=setTimeout(j,t),h(p)}return void 0===m&&(m=setTimeout(j,t)),d}return t=i(t)||0,r(n)&&(f=!!n.leading,c=(g="maxWait"in n)?o(i(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==m&&clearTimeout(m),v=0,l=p=u=m=void 0},_.flush=function(){return void 0===m?d:b(s())},_}},11611:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55193:function(e,t,n){var r=n(99736),s=n(92360);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==r(e)}},82846:function(e,t,n){var r=n(77400);e.exports=function(){return r.Date.now()}},91936:function(e,t,n){var r=n(74833),s=n(11611),i=n(55193),o=0/0,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?o:+e}},40741:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/data-discovery/action-center",function(){return n(51500)}])},30952:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var r=n(24246),s=n(66726),i=n.n(s),o=n(27378),a=n(26917);let l=e=>{let{value:t,onChange:n,placeholder:s,...l}=e,[u,c]=(0,o.useState)(t),d=i()(n,500),m=(0,o.useCallback)(e=>{c(e),d(e)},[]);return(0,r.jsx)(a.Z,{value:u,onChange:m,onClear:()=>{c(""),n("")},placeholder:s,...l})}},77213:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(24246),s=n(13577),i=n(88038),o=n.n(i),a=n(86677);n(27378);var l=n(25980),u=n(90867),c=n(77830),d=()=>{let e=(0,a.useRouter)();return(0,r.jsx)(s.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,r.jsxs)(s.xuv,{children:[(0,r.jsxs)(s.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,r.jsx)(s.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,r.jsx)(s.wpx,{onClick:()=>{e.push(c.fz)},children:"Configure"})]}),(0,r.jsxs)(s.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:t,title:n,padded:i=!0,mainProps:c}=e,m=(0,l.hz)(),p=(0,a.useRouter)(),v="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,f=!(m.flags.privacyRequestsConfiguration&&v),{data:g}=(0,u.JE)(void 0,{skip:f}),{data:y}=(0,u.PW)(void 0,{skip:f}),h=m.flags.privacyRequestsConfiguration&&(!g||!y)&&v;return(0,r.jsxs)(s.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,r.jsxs)(o(),{children:[(0,r.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,r.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)(s.kCb,{as:"main",direction:"column",py:i?6:0,px:i?10:0,h:i?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[h?(0,r.jsx)(d,{}):null,t]})]})}},58754:function(e,t,n){"use strict";var r=n(24246),s=n(13577),i=n(70788);t.Z=e=>{let{heading:t,breadcrumbItems:n,isSticky:o=!0,children:a,rightContent:l,style:u,...c}=e;return(0,r.jsxs)("div",{...c,style:o?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...u}:{paddingBottom:"24px",...u},children:[(0,r.jsxs)(s.jqI,{justify:"space-between",children:["string"==typeof t?(0,r.jsx)(s.lQT,{className:n||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,l&&(0,r.jsx)("div",{"data-testid":"page-header-right-content",children:l})]}),!!n&&(0,r.jsx)(i.m,{className:a?"pb-4":void 0,items:n,"data-testid":"page-breadcrumb"}),a]})}},70788:function(e,t,n){"use strict";n.d(t,{m:function(){return u}});var r=n(24246),s=n(13577),i=n(79894),o=n.n(i),a=n(27378);let{Text:l}=s.AntTypography,u=e=>{let{items:t,...n}=e,i=(0,a.useMemo)(()=>null==t?void 0:t.map((e,n)=>{let i=n===t.length-1,a={...e},u=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,r.jsx)(l,{style:{color:"inherit",maxWidth:i?void 0:400},ellipsis:!i,children:a.title})),u)?a.title=(0,r.jsx)(s.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,r.jsx)(o(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,r.jsx)(s.zrq,{items:i,...n})}},54762:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(24246),s=n(13577),i=n(62165),o=n(54682);let a=e=>{let{consentStatus:t}=e,{flags:n}=(0,i.hz)(),{assetConsentStatusLabels:a}=n;return a&&(null==t?void 0:t.status)===o.pF.ALERT?(0,r.jsx)(s.esZ,{title:null==t?void 0:t.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,r.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,r.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},37059:function(e,t,n){"use strict";n.d(t,{Ak:function(){return f},EY:function(){return d},Tj:function(){return p},Ud:function(){return o},Vr:function(){return g},WJ:function(){return l},mi:function(){return y},nP:function(){return c},nS:function(){return m},rs:function(){return u},sX:function(){return v},wi:function(){return a}});var r=n(78780),s=n(16394),i=n(54682);let{useGetAggregateMonitorResultsQuery:o,useGetDiscoveredSystemAggregateQuery:a,useGetDiscoveredAssetsQuery:l,useAddMonitorResultSystemsMutation:u,useIgnoreMonitorResultSystemsMutation:c,useAddMonitorResultAssetsMutation:d,useIgnoreMonitorResultAssetsMutation:m,useRestoreMonitorResultAssetsMutation:p,useUpdateAssetsSystemMutation:v,useUpdateAssetsDataUseMutation:f,useUpdateAssetsMutation:g,useGetConsentBreakdownQuery:y}=r.u.injectEndpoints({endpoints:e=>({getAggregateMonitorResults:e.query({query:e=>{let{page:t=1,size:n=20,search:r}=e;return{url:"/plus/discovery-monitor/aggregate-results",params:{page:t,size:n,search:r,diff_status:"addition"}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredSystemAggregate:e.query({query:e=>{let{key:t,page:n=1,size:r=20,search:s,diff_status:i}=e;return{url:"/plus/discovery-monitor/system-aggregate-results",params:{monitor_config_id:t,page:n,size:r,search:s,diff_status:i}}},providesTags:["Discovery Monitor Results"]}),getDiscoveredAssets:e.query({query:e=>{let{key:t,system:n,page:r=1,size:i=20,search:o,diff_status:a,sort_by:l=["consent_aggregated","urn"],sort_asc:u=!0}=e;return{url:"/plus/discovery-monitor/".concat(t,"/results?").concat((0,s.du)(Array.isArray(l)?l:[l],"sort_by")),params:{resolved_system_id:n,page:r,size:i,search:o,diff_status:a,sort_asc:u}}},providesTags:()=>["Discovery Monitor Results"]}),addMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,s.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/promote?").concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultSystems:e.mutation({query:e=>{let{monitor_config_key:t,resolved_system_ids:n}=e,r=(0,s.du)(n,"resolved_system_ids");return{method:"POST",url:"/plus/discovery-monitor/".concat(t,"/mute?").concat(r)}},invalidatesTags:["Discovery Monitor Results"]}),addMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/promote?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),ignoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams;return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),restoreMonitorResultAssets:e.mutation({query:e=>{var t;let n=new URLSearchParams({status_to_set:i.LL.ADDITION});return null===(t=e.urnList)||void 0===t||t.forEach(e=>n.append("staged_resource_urns",e)),{method:"POST",url:"/plus/discovery-monitor/un-mute?".concat(n)}},invalidatesTags:["Discovery Monitor Results"]}),updateAssetsSystem:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_system_key:e.systemKey}))}),invalidatesTags:["Discovery Monitor Results","System Assets"]}),updateAssetsDataUse:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.urnList.map(t=>({urn:t,user_assigned_data_uses:e.dataUses}))}),invalidatesTags:["Discovery Monitor Results"]}),updateAssets:e.mutation({query:e=>({method:"PATCH",url:"/plus/discovery-monitor/".concat(e.monitorId,"/results"),body:e.assets}),invalidatesTags:["Discovery Monitor Results"]}),getConsentBreakdown:e.query({query:e=>{let{stagedResourceUrn:t,status:n,page:r=1,size:s=20}=e;return{url:"/plus/discovery-monitor/staged_resource/".concat(encodeURIComponent(t),"/consent"),params:{status:n,page:r,size:s}}}})})})},51500:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(24246),s=n(13577),i=n(79894),o=n.n(i),a=n(27378),l=n(30952),u=n(77213),c=n(77830),d=n(58754),m=n(47935),p=n(7426),v=n(37059);let f=e=>{let{isConfigLoading:t}=e;return(0,r.jsx)(u.Z,{title:"Action center",mainProps:{className:"h-full"},children:(0,r.jsx)(s.jqI,{justify:"center",align:"center",className:"h-full",children:t?(0,r.jsx)(s.$jN,{color:"primary.900"}):(0,r.jsx)(s.DUx,{message:"Coming soon...",description:"Action center is currently disabled.",type:"info",showIcon:!0})})})},g=()=>(0,r.jsx)(s.oj8,{image:s.oj8.PRESENTED_IMAGE_SIMPLE,description:"All caught up! Set up an integration monitor to track your infrastructure in greater detail.",children:(0,r.jsx)(o(),{href:c.KH,passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(s.wpx,{type:"primary",children:"Visit integrations"})})});var y=n(7195),h=n(16394),x=n(54762);let{Text:j}=s.AntTypography,b=e=>{let{monitorSummary:t,showSkeleton:n,...i}=e,{name:l,consent_status:u,total_updates:d,updates:m,last_monitored:p,secrets:v,key:f}=t,g=(0,a.useMemo)(()=>(null==v?void 0:v.url)?(0,h.ge)(v.url):void 0,[null==v?void 0:v.url]),b=(0,a.useMemo)(()=>g?(0,h.tl)(g,60):void 0,[g]),_=Object.entries(m).map(e=>"".concat(e[1]," ").concat(e[0],"s")).join(", "),T=p?(0,h.p6)(new Date(p)):void 0,w=p?(0,y.B)(new Date(p),new Date):void 0;return(0,r.jsx)(s.krs.Item,{"data-testid":"monitor-result-".concat(f),...i,children:(0,r.jsx)(s.N_L,{avatar:!0,title:!1,loading:n,active:!0,children:(0,r.jsxs)(s.bue,{gutter:12,className:"w-full",children:[(0,r.jsx)(s.JGx,{span:17,className:"align-middle",children:(0,r.jsx)(s.krs.Item.Meta,{avatar:(0,r.jsx)(s.t3Z,{src:b,size:30,icon:(0,r.jsx)(s.PJP.huD,{size:30}),style:{backgroundColor:"transparent",color:"var(--ant-color-text)"},alt:"".concat(g," icon")}),title:(0,r.jsxs)(s.jqI,{align:"center",gap:4,children:[(0,r.jsx)(o(),{href:"".concat(c.vi,"/").concat(f),className:"whitespace-nowrap",children:"".concat(d," assets detected").concat(g?" on ".concat(g):"")}),(0,r.jsx)(x.l,{consentStatus:u})]}),description:"".concat(_," detected.")})}),(0,r.jsx)(s.JGx,{span:4,className:"flex items-center justify-end",children:(0,r.jsx)(j,{ellipsis:{tooltip:l},children:l})}),(0,r.jsx)(s.JGx,{span:3,className:"flex items-center justify-end",children:!!w&&(0,r.jsx)(s.esZ,{title:T,children:(0,r.jsxs)(j,{"data-testid":"monitor-date",ellipsis:{tooltip:T},children:[w," ago"]})})})]})})})};var _=()=>{var e;let t=(0,s.pmc)(),{PAGE_SIZES:n,pageSize:i,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x,onNextPageClick:j,isNextPageDisabled:_,startRange:T,endRange:w,pageIndex:k,setTotalPages:R,resetPageIndexToDefault:P}=(0,m.oi)(),[C,A]=(0,a.useState)(""),{data:N,isLoading:S}=(0,p.tB)({api_set:!1}),q=!!(null==N?void 0:null===(e=N.detection_discovery)||void 0===e?void 0:e.website_monitor_enabled);(0,a.useEffect)(()=>{P()},[C,P]);let{data:M,isError:D,isLoading:E,isFetching:I}=(0,v.Ud)({page:k,size:i,search:C},{skip:S||!q});(0,a.useEffect)(()=>{D&&t&&q&&t({title:"Error fetching data",description:"Please try again later",status:"error"})},[D,t,q]),(0,a.useEffect)(()=>{if(M){var e;R(null!==(e=M.total)&&void 0!==e?e:1)}},[M,R]);let L=(null==M?void 0:M.items)||[],O=I?Array.from({length:i},(e,t)=>({key:t.toString(),updates:[],last_monitored:null})):[],z=(0,a.useCallback)(e=>[(0,r.jsx)(o(),{href:"".concat(c.vi,"/").concat(e),passHref:!0,legacyBehavior:!0,children:(0,r.jsx)(s.wpx,{type:"link",className:"p-0","data-testid":"review-button-".concat(e),children:"Review"})},"review")],[]);return q?(0,r.jsxs)(u.Z,{title:"Action center",children:[(0,r.jsx)(d.Z,{heading:"Action center",breadcrumbItems:[{title:"All activity"}]}),(0,r.jsx)(s.jqI,{className:"justify-between py-6",children:(0,r.jsx)(l.f,{value:C,onChange:A})}),(0,r.jsx)(s.krs,{loading:E,dataSource:L||O,locale:{emptyText:(0,r.jsx)(g,{})},renderItem:e=>!!(null==e?void 0:e.key)&&(0,r.jsx)(b,{showSkeleton:I,monitorSummary:e,actions:z(e.key)},e.key)}),!!L&&!!(null==M?void 0:M.total)&&M.total>i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.htM,{className:"mb-6 mt-0"}),(0,r.jsx)(m.s8,{totalRows:(null==M?void 0:M.total)||0,pageSizes:n,setPageSize:y,onPreviousPageClick:h,isPreviousPageDisabled:x||I,onNextPageClick:j,isNextPageDisabled:_||I,startRange:T,endRange:w})]})]}):(0,r.jsx)(f,{isConfigLoading:S})}}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=40741)}),_N_E=e.O()}]);