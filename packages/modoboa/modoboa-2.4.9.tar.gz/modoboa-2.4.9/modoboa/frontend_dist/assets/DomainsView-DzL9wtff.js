import{d as U}from"./domains-CWdc-ODs.js";import{b as M,n as te,g as m,h as B,d as le,c as $,o as C,w as l,a,p as xe,e as v,t as k,f as d,q as E,l as D,s as de,m as z,F as me,v as Ce,x as De,y as we,z as he,A as Ae,B as O,C as Se,I as $e,D as Ne,E as Ue,k as ce,G as Fe,r as Te,H as qe}from"./index-BCUdq-Zu.js";import{u as fe}from"./permissions-C7XVO62l.js";import{V as pe,r as Z}from"./VForm-DwwrfSN8.js";import{c as Le,V as Be,a as Re,b as ve}from"./VCard-BGXTuaE-.js";import{V as oe}from"./VTextField-FBM5XwC5.js";import{V as Pe}from"./VSelect-CeY-emKK.js";import{V as J}from"./VSwitch-BSifpScd.js";import{V as Ee}from"./VSpacer-pLqQLLwB.js";import{V as N,u as Oe,a as Me,m as ze,b as Ie,c as Ge,M as Je,d as _e,e as ie}from"./VAvatar-DbAmPjyA.js";import{p as je}from"./parameters-u6VE5cq8.js";import{_ as We}from"./CreationForm-ChgnxngD.js";import{_ as Ke,a as Ye,b as He,c as Qe}from"./DomainTransportForm-DEsm5zOa.js";import{_ as Xe}from"./AccountPasswordSubForm-D9xU4Or7.js";import{a as P,V as se}from"./VRow-DgX40uiD.js";import{_ as Ze}from"./DomainAdminList-B0z8fRmf.js";import{_ as ea}from"./ConfirmDialog-BLu1kBWp.js";import{V as ee}from"./VChip-Bm7znPZ6.js";import{_ as aa}from"./MenuItems-Bck8ixGf.js";import{V as ta}from"./VCheckboxBtn-DdHQE-gt.js";import{V as ae}from"./VMenu-CTyyRlRb.js";import{u as la,a as oa}from"./VProgressCircular-1VQzh5PK.js";import{u as na,m as ia,a as sa}from"./tag-DCSJ2lri.js";import{V as ye,a as ra}from"./VToolbar-AQXTYlxS.js";import{V as be,a as re,b as ue}from"./forwardRefs-Cn7kyt_f.js";import{V as ua}from"./VDataTable-Etpc99CI.js";import{V as da}from"./VCheckbox-BM1QzY5m.js";import{V as I}from"./VDialog-0NvxFg1X.js";import{_ as ma,i as ca}from"./importExport-B7mBfHxZ.js";import"./VSelectionControl-BYdVI5Q9.js";/* empty css              */import"./VWindowItem-p9SJ1V9Y.js";import"./ssrBoot-B-x5LB2_.js";import"./VContainer-B8HjqhNU.js";import"./VSheet-C8P69LA8.js";import"./ChoiceField-BS45Bjds.js";import"./VAutocomplete-CQ5LL_Nk.js";import"./filter-BSw3r225.js";import"./VAlert-DSMD0lqo.js";import"./VDataTableVirtual-D9Km3t6e.js";import"./VTable-BeyU0Uhj.js";import"./VFileInput-COIdDRxq.js";const fa={class:"headline"},pa={class:"m-label"},va={class:"m-label"},ge={__name:"DomainAliasForm",props:{domainAlias:{type:Object,default:()=>null}},emits:["close"],setup(i,{emit:b}){const{$gettext:e}=M(),f=b,{displayNotification:x}=te(),_=i,w=m([]),t=m({enabled:!0}),c=m(!1),S=m(),V=B(()=>_.domainAlias?e("Update"):e("Add")),p=B(()=>_.domainAlias?e("Edit domain alias"):e("Add a new domain alias"));async function g(){c.value=!0;try{await U.deleteDomainAlias(_.domainAlias.pk),x({msg:e("Domain alias deleted")}),f("close")}finally{c.value=!1}}async function h(){const{valid:s}=await S.value.validate();if(s){c.value=!0;try{if(!t.value.pk)await U.createDomainAlias(t.value),x({msg:e("Domain alias created")});else{const u=JSON.parse(JSON.stringify(t.value));await U.updateDomainAlias(_.domainAlias.pk,u),x({msg:e("Domain alias updated")})}f("close")}finally{c.value=!1}}}return le(()=>{U.getDomains().then(s=>{w.value=s.data}),_.domainAlias&&(t.value=JSON.parse(JSON.stringify(_.domainAlias)))}),(s,u)=>(C(),$(ve,null,{default:l(()=>[a(pe,{ref_key:"vFormRef",ref:S,onSubmit:xe(h,["prevent"])},{default:l(()=>[a(Le,null,{default:l(()=>[v("span",fa,k(p.value),1)]),_:1}),a(Be,null,{default:l(()=>[v("label",pa,k(d(e)("Name")),1),a(oe,{modelValue:t.value.name,"onUpdate:modelValue":u[0]||(u[0]=A=>t.value.name=A),variant:"outlined",density:"compact",rules:[d(Z).required]},null,8,["modelValue","rules"]),v("label",va,k(d(e)("Choose a domain")),1),a(Pe,{modelValue:t.value.target,"onUpdate:modelValue":u[1]||(u[1]=A=>t.value.target=A),items:w.value,"item-title":"name","item-value":"pk",rules:[d(Z).required],"single-line":"",variant:"outlined",density:"compact"},null,8,["modelValue","items","rules"]),a(J,{modelValue:t.value.enabled,"onUpdate:modelValue":u[2]||(u[2]=A=>t.value.enabled=A),label:"Enabled",color:"primary"},null,8,["modelValue"])]),_:1}),a(Re,null,{default:l(()=>[a(Ee),a(N,{loading:c.value,onClick:u[3]||(u[3]=A=>f("close"))},{default:l(()=>[D(k(d(e)("Close")),1)]),_:1},8,["loading"]),i.domainAlias&&i.domainAlias.pk?(C(),$(N,{key:0,color:"error",loading:c.value,onClick:g},{default:l(()=>[D(k(d(e)("Delete")),1)]),_:1},8,["loading"])):E("",!0),a(N,{color:"primary",type:"submit",loading:c.value},{default:l(()=>[D(k(V.value),1)]),_:1},8,["loading"])]),_:1})]),_:1},512)]),_:1}))}},_a={__name:"DomainOptionsForm",props:{modelValue:{type:Object,default:null}},emits:["createAdmin"],setup(i,{expose:b,emit:e}){const{$gettext:f}=M(),x=i,_=e,w=m(),t=m(!1),c=B(()=>x.modelValue);function S(V){_("createAdmin",V)}return b({vFormRef:w}),(V,p)=>(C(),$(pe,{ref_key:"vFormRef",ref:w},{default:l(()=>[a(J,{modelValue:t.value,"onUpdate:modelValue":[p[0]||(p[0]=g=>t.value=g),S],label:d(f)("Create a domain administrator"),color:"primary"},null,8,["modelValue","label"]),a(oe,{modelValue:c.value.domain_admin.username,"onUpdate:modelValue":p[1]||(p[1]=g=>c.value.domain_admin.username=g),label:d(f)("Name"),hint:d(f)("Name of the administrator"),"persistent-hint":"",variant:"outlined",disabled:!t.value,suffix:`@${c.value.name}`,rules:[!t.value||d(Z).required]},null,8,["modelValue","label","hint","disabled","suffix","rules"]),a(Xe,{modelValue:c.value.domain_admin,"onUpdate:modelValue":p[2]||(p[2]=g=>c.value.domain_admin=g),disabled:!t.value},null,8,["modelValue","disabled"]),a(J,{modelValue:c.value.domain_admin.with_mailbox,"onUpdate:modelValue":p[3]||(p[3]=g=>c.value.domain_admin.with_mailbox=g),label:d(f)("With a mailbox"),disabled:!t.value,hint:d(f)("Create a mailbox for the administrator."),"persistent-hint":"",color:"primary"},null,8,["modelValue","label","disabled","hint"]),a(J,{modelValue:c.value.domain_admin.with_aliases,"onUpdate:modelValue":p[4]||(p[4]=g=>c.value.domain_admin.with_aliases=g),label:d(f)("Create aliases"),disabled:!t.value,hint:d(f)("Create standard aliases for the domain."),"persistent-hint":"",color:"primary"},null,8,["modelValue","label","disabled","hint"])]),_:1},512))}},ya={class:"text-grey"},ba={__name:"DomainCreationForm",emits:["close","created"],setup(i,{emit:b}){const{$gettext:e}=M(),f=te(),x=de(),_=b,t=m({name:"",type:"domain",enabled:!0,enable_dns_checks:!0,enable_dkim:!1,dkim_key_selector:"modoboa",quota:0,default_mailbox_quota:0,domain_admin:{username:"admin",random_password:!1,with_mailbox:!1,with_aliases:!1},transport:{settings:{}}});le(()=>{je.getGlobalApplication("admin").then(n=>{const o=n.data.params;t.value.quota=o.default_domain_quota,t.value.default_mailbox_quota=o.default_mailbox_quota,o.default_domain_message_limit!==null&&(t.value.message_limit=o.default_domain_message_limit)})});const c=m(!1),S=m(),V=m(),p=m(),g=m(),h=m(),s=m(),u={general:V,dns:p,limitations:g,options:h,transport:s},A=[{name:"general",title:e("General")},{name:"dns",title:e("DNS")},{name:"limitations",title:e("Limitations")},{name:"options",title:e("Options")}],q=[{name:"general",title:e("General")},{name:"dns",title:e("DNS")},{name:"limitations",title:e("Limitations")},{name:"transport",title:e("Transport")}],j=B(()=>t.value.type==="domain"?A:q),R=B(()=>{const n=[{title:e("General"),items:[{key:e("Name"),value:t.value.name},{key:e("Type"),value:t.value.type},{key:e("Enabled"),value:t.value.enabled,type:"yesno"}]},{title:e("DNS"),items:[{key:e("Enable DNS checks"),value:t.value.enable_dns_checks,type:"yesno"},{key:e("Enable DKIM signing"),value:t.value.enable_dkim,type:"yesno"}]},{title:e("Limitations"),items:[{key:e("Quota"),value:t.value.quota},{key:e("Default mailbox quota"),value:t.value.default_mailbox_quota},{key:e("Message sending limit"),value:t.value.message_limit}]}];if(t.value.enable_dkim&&(n[1].items.push({key:e("DKIM key selector"),value:t.value.dkim_key_selector}),n[1].items.push({key:e("DKIM key length"),value:t.value.dkim_key_length})),t.value.type==="relaydomain"&&t.value.transport.service){const o={title:e("Transport"),items:[{key:e("Service"),value:t.value.transport.service}]};for(const y of s.value.service.settings){const r={key:y.label,value:t.value.transport.settings[`${t.value.transport.service}_${y.name}`]};y.type==="boolean"&&(r.type="yesno"),o.items.push(r)}n.push(o)}else if(t.value.type==="domain"){const o={title:e("Options"),items:[{key:e("Create a domain administrator"),value:c.value,type:"yesno"}]};c.value&&o.items.push({key:e("Administrator name"),value:t.value.domain_admin.username},{name:"random_password",key:e("Random password"),value:t.value.domain_admin.random_password,type:"yesno"},{key:e("With mailbox"),value:t.value.domain_admin.with_mailbox,type:"yesno"},{key:e("Create aliases"),value:t.value.domain_admin.with_aliases,type:"yesno"}),n.push(o)}return n});function G(){_("close")}function W(){navigator.clipboard.writeText(t.value.domain_admin.password).then(()=>{f.displayNotification({msg:e("Password copied to clipboard")})})}function K(n){return u.value[n.name]}function Y(n){return u[n.name].value.vFormRef}async function H(){}function Q(n){c.value=n}async function X(){const n=JSON.parse(JSON.stringify(t.value));c.value||delete n.domain_admin,n.message_limit===""&&delete n.message_limit,n.type==="relaydomain"?s.value.checkSettingTypes(n):delete n.transport;try{const o=await U.createDomain(n);x.push({name:"DomainDetail",params:{id:o.data.pk}}),f.displayNotification({msg:e("Domain created")}),G()}finally{S.value.working=!1}}return(n,o)=>(C(),$(We,{ref_key:"form",ref:S,title:d(e)("New domain"),steps:j.value,"form-getter":K,"get-v-form-ref":Y,"validate-object":H,"summary-sections":R.value,onClose:G,onCreate:X},{"form.general":l(()=>[a(Qe,{ref_key:"general",ref:V,modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=y=>t.value=y),class:"ml-4"},null,8,["modelValue"])]),"form.dns":l(()=>[a(He,{ref_key:"dns",ref:p,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=y=>t.value=y),class:"ml-4"},null,8,["modelValue"])]),"form.limitations":l(()=>[a(Ye,{ref_key:"limitations",ref:g,modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=y=>t.value=y),class:"ml-4"},null,8,["modelValue"])]),"form.options":l(()=>[a(_a,{ref_key:"options",ref:h,modelValue:t.value,"onUpdate:modelValue":o[3]||(o[3]=y=>t.value=y),class:"ml-4",onCreateAdmin:Q},null,8,["modelValue"])]),"form.transport":l(()=>[a(Ke,{ref_key:"transport",ref:s,modelValue:t.value.transport,"onUpdate:modelValue":o[4]||(o[4]=y=>t.value.transport=y),class:"ml-4"},null,8,["modelValue"])]),"item.random_password":l(({item:y})=>[y.value?(C(),$(P,{key:0,cols:"12",class:"highligth text-white"},{default:l(()=>[a(se,null,{default:l(()=>[a(P,null,{default:l(()=>[v("span",null,k(y.key),1)]),_:2},1024),a(P,{class:"text-right"},{default:l(()=>[D(k(n.$yesno(y.value)),1)]),_:2},1024)]),_:2},1024),a(se,null,{default:l(()=>[a(P,{class:"text-right py-1"},{default:l(()=>[D(k(t.value.domain_admin.password)+" ",1),a(N,{icon:"mdi-clipboard-multiple-outline",color:"white",variant:"text",title:d(e)("Copy to clipboard"),onClick:W},null,8,["title"])]),_:1})]),_:1})]),_:2},1024)):(C(),z(me,{key:1},[a(P,null,{default:l(()=>[v("span",ya,k(y.key),1)]),_:2},1024),a(P,{class:"text-right"},{default:l(()=>[D(k(n.$yesno(y.value)),1)]),_:2},1024)],64))]),_:2},1032,["title","steps","summary-sections"]))}},ga={__name:"DNSStatusChip",props:{status:{type:String,default:"pending"}},setup(i){const b=i,{$gettext:e}=M(),f=B(()=>b.status==="disabled"?e("Disabled"):b.status==="pending"?e("Pending"):b.status==="critical"?e("Problem"):b.status==="ok"?e("Valid"):e("Unknown")),x=B(()=>b.status==="disabled"?"":b.status==="pending"?"info":b.status==="critical"?"error":b.status==="ok"?"success":"warning");return(_,w)=>(C(),$(ee,{color:x.value,size:"small"},{default:l(()=>[D(k(f.value),1)]),_:1},8,["color"]))}},Va=De({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:$e,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...sa(),...Ge({location:"top end"}),...Ie(),...ia(),...Se(),...ze({transition:"scale-rotate-transition"})},"VBadge"),ka=Ce()({name:"VBadge",inheritAttrs:!1,props:Va(),setup(i,b){const{backgroundColorClasses:e,backgroundColorStyles:f}=la(()=>i.color),{roundedClasses:x}=Oe(i),{t:_}=we(),{textColorClasses:w,textColorStyles:t}=oa(()=>i.textColor),{themeClasses:c}=he(),{locationStyles:S}=Me(i,!0,V=>(i.floating?i.dot?2:4:i.dot?8:12)+(["top","bottom"].includes(V)?Number(i.offsetY??0):["left","right"].includes(V)?Number(i.offsetX??0):0));return na(()=>{const V=Number(i.content),p=!i.max||isNaN(V)?i.content:V<=Number(i.max)?V:`${i.max}+`,[g,h]=Ae(b.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(i.tag,O({class:["v-badge",{"v-badge--bordered":i.bordered,"v-badge--dot":i.dot,"v-badge--floating":i.floating,"v-badge--inline":i.inline},i.class]},h,{style:i.style}),{default:()=>{var s,u;return[v("div",{class:"v-badge__wrapper"},[(u=(s=b.slots).default)==null?void 0:u.call(s),a(Je,{transition:i.transition},{default:()=>{var A,q;return[Ne(v("span",O({class:["v-badge__badge",c.value,e.value,x.value,w.value],style:[f.value,t.value,i.inline?{}:S.value],"aria-atomic":"true","aria-label":_(i.label,V),"aria-live":"polite",role:"status"},g),[i.dot?void 0:b.slots.badge?(q=(A=b.slots).badge)==null?void 0:q.call(A):i.icon?a(_e,{icon:i.icon},null):p]),[[Ue,i.modelValue]])]}})])]}})}),{}}}),xa={class:"v-data-table__td v-data-table-column--no-padding v-data-table-column--align-start"},Ca={key:0},Da={class:"text-right"},wa={class:"grey lighten-4"},ha=["colspan"],Aa=["onClick"],Sa={__name:"DomainList",setup(i,{expose:b}){const{$gettext:e}=M(),f=de(),{canSetRole:x}=fe(),_=te(),w=[{title:e("Name"),key:"name"},{title:e("Enabled"),key:"enabled",width:"5%"},{title:e("Aliases"),key:"domainalias_count"},{title:e("DNS status"),key:"dns_global_status",sortable:!1},{title:e("Sending limit"),key:"message_limit"},{title:e("Quota"),key:"allocated_quota_in_percent"}];x.value&&w.push({title:e("Actions"),value:"actions",sortable:!1,align:"end"});const t=m({}),c=m(),S=m([]),V=m(!1),p=m(!1),g=m(null),h=m(null),s=m(!1),u=m(!1),A=m(""),q=m([]),j=m([]);async function R(){t.value={},p.value=!0;try{const n=await U.getDomains();S.value=n.data}finally{p.value=!1}}function G(){u.value=!1,g.value=null,h.value=null}async function W(n){if(await c.value.open(e("Warning"),e("Do you really want to delete the domain %{ domain }?",{domain:n.name}),{color:"error",cancelLabel:e("No"),agreeLabel:e("Yes")})){p.value=!0;try{const y={keep_folder:V.value};await U.deleteDomain(n.pk,y),R(),_.displayNotification({msg:e("Domain deleted")}),V.value=!1}finally{p.value=!1}}}function K(n){f.push({name:"DomainEdit",params:{id:n.pk}})}function Y(n,o){g.value=n,h.value=o,u.value=!0}function H(n,o,y,r){if(y(o)){r(o);return}U.getDomainAliases(n.name).then(F=>{t.value[n.name]=F.data,r(o)})}function Q(n){g.value=n,s.value=!0}function X(n){const o=[{label:e("Administrators"),icon:"mdi-account-supervisor",onClick:Q},{label:e("Edit"),icon:"mdi-circle-edit-outline",onClick:K},{label:e("Delete"),icon:"mdi-delete-outline",onClick:W,color:"red"}];return n.opened_alarms_count&&o.push({label:e("Alarms"),icon:"mdi-bell",color:"red",onClick:()=>f.push({name:"Alarms"})}),o}return le(()=>{R()}),b({reloadDomains:R}),(n,o)=>{const y=Te("router-link");return C(),$(ve,{class:"mt-6"},{default:l(()=>[a(ua,{modelValue:q.value,"onUpdate:modelValue":o[1]||(o[1]=r=>q.value=r),expanded:j.value,headers:w,items:S.value,"item-value":"name",search:A.value,"show-select":"","expand-on-click":"",loading:p.value},{top:l(()=>[a(ye,{color:"white",flat:""},{default:l(()=>[a(oe,{modelValue:A.value,"onUpdate:modelValue":o[0]||(o[0]=r=>A.value=r),"prepend-inner-icon":"mdi-magnify",placeholder:d(e)("Search"),variant:"outlined","single-line":"","hide-details":"",density:"compact",class:"flex-grow-0 w-33 mr-4"},null,8,["modelValue","placeholder"]),qe(n.$slots,"extraActions",{},void 0,!0),a(ae,{location:"bottom"},{activator:l(({props:r})=>[a(N,O({variant:"flat","append-icon":"mdi-chevron-down"},r,{size:"small"}),{default:l(()=>[D(k(d(e)("Actions")),1)]),_:2},1040)]),default:l(()=>[a(be,{density:"compact"})]),_:1}),a(N,{variant:"text",icon:"mdi-reload",onClick:R})]),_:3})]),item:l(({item:r,internalItem:L,isExpanded:F,toggleExpand:ne,isSelected:Ve,toggleSelect:ke})=>[v("tr",null,[v("td",xa,[a(ta,{value:!Ve(L),onClick:T=>ke(L)},null,8,["value","onClick"])]),v("td",null,[a(y,{to:{name:"DomainDetail",params:{id:r.pk}}},{default:l(()=>[D(k(r.name),1)]),_:2},1032,["to"]),r.type==="relaydomain"?(C(),$(ee,{key:0,size:"small",color:"primary",class:"ml-2"},{default:l(()=>[D(k(d(e)("Relay")),1)]),_:1})):E("",!0)]),v("td",null,[a(_e,{color:r.enabled?"success":"error",icon:r.enabled?"mdi-check-circle":"mdi-close-circle",variant:"flat"},null,8,["color","icon"])]),v("td",null,[D(k(r.domainalias_count)+" aliases ",1),r.domainalias_count?(C(),$(N,{key:0,variant:"text",icon:F(L)?"mdi-chevron-up":"mdi-chevron-down",onClick:T=>H(r,L,F,ne)},null,8,["icon","onClick"])):E("",!0)]),v("td",null,[a(ga,{status:r.dns_global_status},null,8,["status"])]),v("td",null,[a(ie,{modelValue:r.allocated_quota_in_percent,"onUpdate:modelValue":T=>r.allocated_quota_in_percent=T},null,8,["modelValue","onUpdate:modelValue"])]),v("td",null,[a(ie,{modelValue:r.allocated_quota_in_percent,"onUpdate:modelValue":T=>r.allocated_quota_in_percent=T},null,8,["modelValue","onUpdate:modelValue"])]),d(x)?(C(),z("td",Ca,[v("div",Da,[a(ae,{"offset-y":""},{activator:l(({props:T})=>[r.opened_alarms_count?(C(),$(ka,{key:0,bordered:"",color:"error",icon:"mdi-bell",overlap:""},{default:l(()=>[a(N,O({icon:"mdi-dots-horizontal",variant:"text"},T),null,16)]),_:2},1024)):(C(),$(N,O({key:1,icon:"mdi-dots-horizontal",variant:"text"},T),null,16))]),default:l(()=>[a(aa,{items:X(r),obj:r},null,8,["items","obj"])]),_:2},1024)])])):E("",!0)])]),"expanded-row":l(({item:r,columns:L})=>[v("tr",wa,[v("td",{colspan:L.length},[(C(!0),z(me,null,Fe(t.value[r.name],F=>(C(),z("span",{key:F.name,class:"mr-4"},[v("a",{href:"#",class:"mr-2",onClick:ne=>Y(r,F)},k(F.name),9,Aa),a(ee,{variant:"flat",size:"x-small",color:"success"},{default:l(()=>o[6]||(o[6]=[D("DNS OK")])),_:1,__:[6]})]))),128))],8,ha)])]),_:3},8,["modelValue","expanded","items","search","loading"]),a(ea,{ref_key:"confirm",ref:c},{default:l(()=>[a(da,{modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=r=>V.value=r),label:d(e)("Do not delete domain folder"),"hide-details":""},null,8,["modelValue","label"])]),_:1},512),a(I,{modelValue:u.value,"onUpdate:modelValue":o[3]||(o[3]=r=>u.value=r),persistent:"","max-width":"800px"},{default:l(()=>[a(ge,{"domain-alias":h.value,onClose:G},null,8,["domain-alias"])]),_:1},8,["modelValue"]),a(I,{modelValue:s.value,"onUpdate:modelValue":o[5]||(o[5]=r=>s.value=r),persistent:"","max-width":"800px"},{default:l(()=>[a(Ze,{domain:g.value,"dialog-mode":"",onClose:o[4]||(o[4]=r=>s.value=!1)},null,8,["domain"])]),_:1},8,["modelValue"])]),_:3})}}},$a=ce(Sa,[["__scopeId","data-v-d8d314e4"]]),Na={__name:"DomainsView",setup(i){const b=m(),e=m(!1),f=m(!1),x=m(!1),{$gettext:_}=M(),{canAddDomain:w}=fe(),t=m(),{importContent:c,exportContent:S}=ca();function V(){U.exportAll().then(h=>{S(h.data,"domains",_)})}function p(h){c(U,h,t,_)}const g=()=>{e.value=!1,b.value.reloadDomains()};return(h,s)=>(C(),z("div",null,[a(ye,{flat:""},{default:l(()=>[a(ra,null,{default:l(()=>[D(k(d(_)("Domains")),1)]),_:1})]),_:1}),a(d($a),{ref_key:"domainList",ref:b},{extraActions:l(()=>[d(w)?(C(),$(ae,{key:0,"offset-y":""},{activator:l(({props:u})=>[a(N,O({color:"primary",variant:"outlined"},u,{"prepend-icon":"mdi-plus",class:"mr-4"}),{default:l(()=>[D(k(d(_)("New")),1)]),_:2},1040)]),default:l(()=>[a(be,{density:"compact"},{default:l(()=>[a(re,{onClick:s[0]||(s[0]=u=>f.value=!0)},{default:l(()=>[a(ue,null,{default:l(()=>[D(k(d(_)("Domain")),1)]),_:1})]),_:1}),a(re,{onClick:s[1]||(s[1]=u=>e.value=!0)},{default:l(()=>[a(ue,null,{default:l(()=>[D(k(d(_)("Alias")),1)]),_:1})]),_:1})]),_:1})]),_:1})):E("",!0),d(w)?(C(),$(N,{key:1,class:"mr-2",title:d(_)("Import domains and aliases from CSV file"),variant:"flat",icon:"mdi-file-import-outline",onClick:s[2]||(s[2]=u=>x.value=!0)},null,8,["title"])):E("",!0),a(N,{class:"mr-2",title:d(_)("Export domains and aliases to CSV"),variant:"flat",icon:"mdi-file-export-outline",onClick:V},null,8,["title"])]),_:1},512),a(I,{modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=u=>f.value=u),fullscreen:"",scrollable:"","z-index":"10"},{default:l(()=>[a(d(ba),{onClose:s[3]||(s[3]=u=>f.value=!1)})]),_:1},8,["modelValue"]),a(I,{modelValue:e.value,"onUpdate:modelValue":s[6]||(s[6]=u=>e.value=u),persistent:"","max-width":"800px"},{default:l(()=>[a(d(ge),{onClose:s[5]||(s[5]=u=>g())})]),_:1},8,["modelValue"]),a(I,{modelValue:x.value,"onUpdate:modelValue":s[8]||(s[8]=u=>x.value=u),persistent:"","max-width":"800px"},{default:l(()=>[a(d(ma),{ref_key:"importForm",ref:t,title:d(_)("Import domains"),onSubmit:p,onClose:s[7]||(s[7]=u=>x.value=!1)},{help:l(()=>s[9]||(s[9]=[v("ul",null,[v("li",null,[v("em",null,"domain; name; quota; default mailbox quota; enabled")]),v("li",null,[v("em",null,"domainalias; name; targeted domain; enabled")]),v("li",null,[v("em",null,"relaydomain; name; target host; target port; service; enabled; verify recipients")])],-1)])),_:1},8,["title"])]),_:1},8,["modelValue"])]))}},gt=ce(Na,[["__scopeId","data-v-50470732"]]);export{gt as default};
